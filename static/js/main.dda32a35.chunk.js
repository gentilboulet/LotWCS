(window.webpackJsonplotwcs=window.webpackJsonplotwcs||[]).push([[0],{102:function(e,t,n){e.exports=n(188)},113:function(e,t,n){},114:function(e,t,n){},120:function(e,t,n){},121:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},188:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"historyDeleteUpTo",(function(){return b})),n.d(r,"resetToInitialState",(function(){return v}));var i={};n.r(i),n.d(i,"chiBuy",(function(){return g}));var a={};n.r(a),n.d(a,"setName",(function(){return Xe})),n.d(a,"setConcept",(function(){return Ze})),n.d(a,"setArchetype",(function(){return $e})),n.d(a,"setRank",(function(){return et}));var o={};n.r(o),n.d(o,"openStyle",(function(){return Et})),n.d(o,"buyTechnique",(function(){return Ot})),n.d(o,"customStyleName",(function(){return kt})),n.d(o,"customTechniqueName",(function(){return wt}));var s={};n.r(s),n.d(s,"open",(function(){return Pt})),n.d(s,"buyOption",(function(){return Ft}));var u={};n.r(u),n.d(u,"skillsBuy",(function(){return qt})),n.d(u,"skillSpecialityBuy",(function(){return Dt}));var c={};n.r(c),n.d(c,"increase",(function(){return Ut}));var l=n(13),d=n(35),h=n(94),p=n(0),f=n(18),m=n(21),y=n(8),b=Object(y.createAction)("history/DELETE",(function(e){return function(t){return e({id:t})}})),v=Object(y.createAction)("history/INITIAL_STATE",(function(e){return function(){return e()}})),g=Object(y.createAction)("chi/BUY",(function(e){return function(t,n,r){return e({chi:t,value:n,cost:r})}})),E="DISCOUNT_CHI",O="DISCOUNT_SKILL",k="DISCOUNT_LORESHEET",w="DISCOUNT_LORESHEET_OPTION",j="DISCOUNT_KUNGFU_STYLE",C="DISCOUNT_KUNGFU_TECHNIQUE",S="DISCOUNT_VIRTUE";function T(e){switch(e.type){case E:case O:case k:case w:case j:case C:case S:return!0;default:return!1}}function B(e,t){var n=e.discounts.map((function(e,n){return t(e)?n:NaN})).filter((function(e){return!isNaN(e)}));return n||[]}var I="SECRET_ARTS",N="SAGE_LORESHEET",A={uid:"jianghu",type:N,name:"The Jiang Hu",category:"Rivers and Lakes",cost:0,ruleset:"core",description:"Within Shen Zhou, there is a parallel world of outsiders and outcasts. Some are born into this world, others are forced into it, and many more choose to live in it to escape the boundaries and limitations imposed on them by regular society. The heroes and rogues within this world are abjured by the common people as threats to an orderly life, but for many they represent a hope of escape, or advancement, from a life controlled by tradition.",options:[{uid:"familiarity",cost:2,type:"Bonus",description:"You know how to navigate the Rivers and Lakes outside the Wulin organizations, in other Jiang Hu communities like the criminal underground, the ferrymen guilds, or the pleasure trade. Pick one such group; you get a +5 bonus to social rolls where familiarity with that subculture matters.",repeatable:!0,prerequisites:[],perks:[],payload:"an organization"},{uid:"knunderground",cost:{min:2,max:10},type:"Fortune",description:"Once per session, upon arriving in a new location, you may declare to have basic knowledge of the local Jiang Hu underground, including important organizations and who\u2019s in charge. This includes Wulin factions.",repeatable:!0,prerequisites:[],perks:[]},{uid:"statusunderground",cost:{min:1,max:5},description:"You are already known within one or more of the aforementioned organizations, and have some Status with them.",type:"Status",repeatable:!0,prerequisites:[{type:"OR",prerequisites:["familiarity","knunderground"]}],perks:[],payload:"an organization"}]},x="BONUS_DISCOUNT",P="BONUS_DESTINY",F="BONUS_ENTANGLEMENT",q="BONUS_CHI",D="BONUS_CULTIVATION",U="BONUS_ONE_AMONG_N",R="BONUS_SKILL_RANK",W="BONUS_SPECIALITY",L="BONUS_LORESHEET",M="BONUS_LORESHEET_OPTION";function H(e){return{type:P,value:e}}function _(e,t){return{type:q,chi:t,value:e}}function Y(e,t){return{skill:e,speciality:t,type:W}}var K={uid:"tigersanddragons",type:N,name:"Crouching Tigers and Hidden Dragons",category:"Rivers and Lakes",cost:1,ruleset:"core",description:"The saying goes, \u201cThe Jiang Hu is full of Crouching Tigers and Hidden Dragons\u201d. So many in the martial community have every reason to hide their true face, and their true power. Who knows who might prove to be a powerful fighter in seclusion?",options:[{uid:"hiddenid",cost:{min:0,max:5},type:"Disadvantage",description:"You are hiding your true identity behind a disguise. Are you a noble passing as a beggar? Are you masquerading as someone of the opposite gender? Do you pretend to be a member of a certain organization while in reality serving another? Once a session, whenever the veil of your disguise seems to be pierced and protecting your fake identity gets you in trouble, earn 1 additional Destiny. If this is your first or second disadvantage you can get it for free, otherwise it costs 5 Destiny.",repeatable:!1,prerequisites:[],perks:[],payload:"an hidden identity"},{uid:"stabbingguesttechnique",cost:3,description:"Following in the traditions of the Cike of the past, you learn or develop the Stabbing Guest Technique. This helps you when you seek to gain the trust of someone that you seek to hurt, damage, or destroy! As long as you have this stated purpose and make sure to describe your actions as fitting with your devious plans, you get a +5 Action Bonus to all appropriate social rolls to gain their trust, appear friendly and harmless, and enter into their confidence. This bonus is lost if you stop harboring bad intentions.",type:"Secret",repeatable:!1,prerequisites:[],perks:[]},{uid:"sensechi",cost:3,description:"Get the Wu Wei Specialty: Sense Chi or the Stealth Specialty: Hide Killer Intent for free",type:"Bonus",repeatable:!1,prerequisites:[],perks:[function(e){if(0===Object.keys(e).length)throw new Error("Can not create one out of zero");return 1===Object.keys(e).length?Object.values(e)[0]:{type:U,bonuses:e}}({sensechi:Y("Wu Wei","Sense Chi"),hidekillerintent:Y("Wu Wei","Hide Killer Intent")})]}]},G="AUTO_CONDITION_SKILL",z="AUTO_CONDITION_ARCHETYPE";var V,J,Q,X=[A,K,{uid:"wulin",type:N,name:"The Wulin",category:"Rivers and Lakes",cost:0,ruleset:"core",description:"The Wulin is considered a greater family for those who dedicate their lives to the martial arts, regardless of their origins and goals, for only a warrior can truly understand another warrior, even if they stand on opposite sides of the battlefield. It is said that Heaven has a place assigned for everyone. The path of Kung Fu is for those who reject this idea, who believe that fate is in their hands, and that their fortunes are forged by the strength of their spirit and the fire of their passion.",options:[{uid:"tieswithanother",cost:{min:1,max:10},type:"Involvement",description:"The World of Martial Arts is full of heroes. Some heroes become teachers, friends closer than brothers, lovers, or soul mates, while others become sworn rivals or hated enemies. Spend destiny to tie your fate to that of any other character that may appeal to you. In order to declare an existing relationship between the two of you, make a current action (such as defeating them in battle or showing up to assist them), or make sure that you will develop such a relationship shortly. As usual, refer to Introduction to Loresheets for costs.",repeatable:!0,prerequisites:[],perks:[],payload:"a hero"},{uid:"historicalfact",cost:{min:3,max:15},type:"Fortune",description:"The history of the Wulin is shrouded in the mists of legends and myths, but you manage to shine a light on one particular facet! Introduce a historical fact of your own design that pertains to your current situation and which gives you an advantage of some sort, such as an alternative solution to a problem. This might concern a person, an organization, or even the Wulin as a whole. Needless to say, the Sage is the final arbitrator of cost.",repeatable:!0,prerequisites:[],perks:[],payload:"an historical fact"}]},{uid:"wulinsage",type:N,name:"The Wulin Sage",category:"Rivers and Lakes",cost:0,ruleset:"core",description:"Legends speak of a mythical figure that oversees the Wulin on behalf of Heaven. The Sage records all of the history and affairs of the martial world; he decides who is worthy of advancement and reports to the Celestial Order on the advancement and deeds of Chivalrous heroes, and to the Hellish Courts on those of the selfish. He sees that those who seek greater challenges reap greater glory and attain higher power.",options:[{uid:"fact",cost:{min:5,max:15},type:"Fortune",description:"With Sage approval, you may introduce a fact about the truth behind the Wulin Sage that would influence the current story.",repeatable:!0,prerequisites:[],perks:[],payload:"a fact"},{uid:"tieswithsage",cost:{min:5,max:10},type:"Involvement",description:"Your destiny will be tied to the figure of the Wulin Sage.",repeatable:!1,prerequisites:[],perks:[]},{uid:"tiensnpcwithsage",cost:{min:3,max:10},type:"Involvement",description:"The Destiny of an NPC of your choice will be or is tied to the figure of the Wulin Sage.",repeatable:!0,prerequisites:[],perks:[],payload:"a NPC"}]},{uid:"secretartofbattle",type:I,name:"The Secret Art of Battle",category:"The Warrior's Art",cost:10,ruleset:"secret-arts",description:"Discovery/Toolset/Manipulation Lore (The Warrior's Art).",options:[],perks:[(V="warrior",J=[(Q="secretartofbattle",{type:L,lsUid:Q})],{type:z,archetype:V,perks:J})]},{uid:"extraordinarywarriortechniques",type:I,name:"Extraordinary Warrior Techniques",category:"The Warrior's Art",cost:1,ruleset:"secret-arts",description:"These are techniques that flow from an understanding of the Warrior\u2019s Art \u2013 though not part of specific Styles, they might be considered Formless Techniques for Externals. They are based on a deeper insight of the lessons of the Five Combat Approaches as applied on the field of battle \u2013 being universally applicable, there are almost as many variants and individual expressions of these techniques as there are practitioners.",options:[{uid:"controllinginnerforce",cost:3,name:"Controlling Inner Force",type:"Flood",description:"Whether through pressure points, cruel cuts, or a deeper understanding of Wu Wei, the Warrior breaks the equilibrium of their opponent. When you achieve a critical success on a Disorient Marvel, you can Flood a die from your River to increase the penalty to -10",prerequisites:[],perks:[]},{uid:"controllingouterforce",cost:3,name:"Controlling Outer Force",type:"Flood",description:"The Style of your opponent flows in an unbroken stream from hard-won lessons to the expression of techniques. Disrupt that stream, and you deny them the tools of combat. When you achieve a critical success on a Disrupt Marvel, you can Flood a die from your River to increase the penalty to -10.",prerequisites:[],perks:[]},{uid:"gardenershapesthesaplingtechnique",cost:5,name:"Gardener Shapes the Sapling Technique",type:"Extended/Augment",description:"The Warrior can also be a teacher; their advice serves as a sharp and balanced weapon in their pupil's hands. As the gardener cultivates his plants from seedlings, you shape your students to grow and prosper. You can spend 1 Joss to use a scene of training to confer an Approach to someone else, until the end of the next combat. You and the Sage decide on the details of this particular training, as well as the outlines of the Battle Condition; your pupil can only choose whether to obey their master!",prerequisites:[],perks:[]},{uid:"mirrorreflectiontechnique",cost:3,name:"Mirror Reflection Technique",type:"Flood",description:"You not only excel at reading the intricacies of your opponent\u2019s style, but spend long hours training to copy it, unconsciously modeling your Chi to match their movements and shifting your own muscle tension to mimic theirs. Using the conflict itself as your training ground, you assume the hidden strengths of your enemy. After witnessing an opponent in combat and Detecting their chosen Combat Condition with the usual Tactics roll, you can Flood two dice from your River to instantly assume their approach and the associated Combat Condition.",prerequisites:[],perks:[]},{uid:"mirrorreflectiontechnique_2",cost:5,name:"Mirror Reflection Technique",type:"Flood",description:"There are whispers of an ultimate form of this technique that allows a Warrior to flow through forms to instinctively assume a superior tactic in response to his enemy. For every action, there is an appropriate reaction, and these legendary warriors have internalized the forms of battle. For an additional 5 Destiny, you learn the ultimate form of this technique: instead of copying your opponent\u2019s form, you assume an approach that controls his! You describe the generalities of the approach, and the Sage determines the details.",prerequisites:["mirrorreflectiontechnique"],perks:[]},{uid:"qualityevaluationtechnique",cost:3,name:"Quality Evaluation Technique",type:"Augment",description:"There exists a multitude of techniques to gauge an opponent\u2019s worthiness and the vital components of their Styles. Some note the development of muscles and ligaments; others read the eyes and their movement. More utilitarian approaches include sneaking a look at their opponents while they train! Whatever your approach, you excel at weighing their strengths and weaknesses. You get +10 to Tactics rolls made to evaluate the qualities of an opponent\u2019s External Style.",perks:[],prerequisites:[]},{uid:"springfollowswintertechnique",cost:5,name:"Spring Follows Winter Technique",type:"Wave",description:"Learning when to let go might be the hardest lesson to learn; one way or the other, you\u2019ve mastered it. When others stubbornly refuse to move, you flow and shift. It is in the nature of things to change. Make a Hard (30) Tactics Wave \u2013 if this { is } successful, you are allowed to spend 2 Joss to shift your Approach at the end  of this turn. The Difficulty rises to Memorable (40) if you { are } trying to shift to the Approach that Controls your current one.",perks:[],prerequisites:[]},{uid:"stancebreakingforcetechnique",cost:3,name:"Stance-Breaking Force technique",type:"Augment",description:"Having internalized the lessons of Five-Element combat theory and the tactical Classics, you easily wield the strengths of your Approach. Increase the bonus to Tactics rolls against an opponent\u2019s approach that your approach Controls to +10.",prerequisites:[],perks:[]},{uid:"tendirectionmovementapproach",cost:2,name:"Ten-Direction Movement Approach",type:"Flood",description:"Trap the foot. Close the gate. Block the way. Prevent your opponent from moving as they want, and remove any obstacles to your own path. Mastery of the field is the first step to victory. When you achieve a critical success on a Shaping Marvel, you can Flood to add +5 to the final result per die flooded.",perks:[],prerequisites:[]},{uid:"unassailablebattlesainttechnque",cost:5,name:"Unassailable Battle Saint Technique",type:"Augment",description:"You are an enlightened warrior, having reached the deeper secrets of the Five-Element Approach to battle. You can spend 1 Joss when you roll a Critical Success to create a Combat Condition for yourself to make { it } a Major Condition",prerequisites:[],perks:[]}]}];function Z(e){return e?X.filter((function(t){return e(t)})):X}function $(e){if(!X.find((function(t){return t.uid===e})))throw new Error('Invalid loresheet "'+e+'"')}function ee(e,t){$(e);var n=X.findIndex((function(t){return t.uid===e}));if(!X[n].options.find((function(e){return e.uid===t})))throw new Error('Invalid loresheet option " + uid + "')}function te(e){var t=X.findIndex((function(t){return t.uid===e}));return X[t]}function ne(e){return e.type===N}function re(e){return e.type===I}function ie(e,t){var n=te(e),r=n.options.findIndex((function(e){return e.uid===t}));return n.options[r]}var ae="KUNGFU_EXTERNAL",oe="KUNGFU_INTERNAL",se="EFFECT_COMBAT_STATISTIC",ue="EFFECT_CONDITIONAL_TEXT",ce="EFFECT_CHI_THRESHOLD_INCREASE_BASE_CHI";function le(e,t){return{increase:t,statistic:e,type:se}}function de(e){var t=e.filter((function(e){return e.length>0}));if(0===t.length)throw new Error("Error with conditionalText : empty text");return{text:t,type:ue}}function he(e){return de(new Array(e))}var pe,fe={name:"Blossom Harvest",uid:"Blossom Harvest",qualities:["This is one of the most honest and straightforward fighting styles there is. It dispenses with trickery or fancy moves, and compensates with sweat and resilience. Its training methods use everyday items and situations, such as running upstream through a river to build stamina, and using farming tools to practice weapon forms. Most of its techniques and theories also incorporate metaphors that are easy for common people to understand.","Because it is so approachable, it has achieved a folk hero status; peasant rebellions often start training with this fighting style, calling those who stand against injustice \u201cBlossoming Heroes\u201d."],weapons:["Massive","Staff","Unarmed"],laugths:"A chain is only as strong as its weakest link, and so Blossom Harvest laughs at styles that are overly complicated or full of flourishes. These intricate methods are easily smashed aside and broken. It likewise laughs at such trivialities as being outnumbered, or disadvantageous terrain \u2013 pure grit and hellish training have rendered Blossoming Heroes fearless to such things!",fears:"This style has problems when facing fighters who are reactive. Blossom Harvest\u2019s openness is easy to read and predict, giving such opponents everything they need. It\u2019s also ill-prepared for enemies who wield supernatural forces or influence.",statistics:{speed:5,footwork:0,strike:5,damage:10,block:5,toughness:10},techniques:[{name:"Heart-Fire Temper Skill",cost:4,description:"Pain and fear blunt edges worse than rust, but your training has seen every bone broken and regrown stronger. To you, pain is but a reminder of your lessons and your teacher\u2019s wisdom.",effect:he("When you have a physical wound condition, this style\u2019s Damage bonus increases to +15."),uid:"Heart-Fire Temper Skill"},{name:"Iron Skin",cost:5,description:"Hardened muscles and willpower have given you great resistance to physical punishment. Spears bend and sticks break upon striking you!",effect:le("toughness",5),uid:"Iron Skin"},{name:"Iron Skin",uid:"Iron Skin 2",cost:4,description:"Hardened muscles and willpower have given you great resistance to physical punishment. Spears bend and sticks break upon striking you!",effect:(pe=2,{chiIncrease:pe,type:ce}),prerequisites:[{uid:"iron_skin_1"}]},{name:"Nine Mountains Great Strength",uid:"Nine Mountains Great Strength",cost:5,description:"Your attacks are like mountains: grand and overwhelming, undeniable and unmovable.",effect:le("strike",5)},{name:"No Vermin in the World",uid:"No Vermin in the World",cost:2,description:"The corrupt are numerous and the virtuous seem but few these days. Villages are razed to the ground and orphans cry in the streets. The great men of this age therefore have no choice but to be Blossoming Heroes, fighting off entire gangs all by themselves!",effect:he("All your attacks count as Area attacks for the purpose of damaging groups of Minions.")}]},me={name:"Bone-Fed Wolf Fang",uid:"Bone-Fed Wolf Fang",weapons:["Massive","Saber"],qualities:["Generations of battlefield experience have shaped a fighting style developed with the practicalities of warfare in mind. Some maneuvers were loosely inspired by the gruesome methods by which wolves drag down their prey. It is mainly taught by the military, but unfortunately, many deserters take up a life of banditry, making this style a common plague for simple people. Because of this, the style is also often called a dog\u2019s way of fighting.","This style focuses on hard, linear movements designed to cripple and exploit weaknesses\u2013the supreme soldier needs efficiency, not beauty. It cruelly maims first, and dispatches second. No methods are too dishonest when victory is on the line."],laugths:"The wolf laughs at honesty, which it rewards with hungry teeth. Above all else, the wolf knows no greater joy than to fight someone vulnerable or caught off guard.",fears:"The wolf fears what is hidden or unorthodox, for his many strategies don\u2019t account for them. The wolf also dislikes being outnumbered and surrounded; it relies on being the hunting pack, not the hunted.",statistics:{speed:5,footwork:5,strike:5,damage:10,block:5,toughness:5},techniques:[{name:"Circling Pack",cost:4,description:"Wolves strike from all sides to overwhelm their prey. You force a response with your weapon, creating an opening so you can deal a blow to a vulnerable spot.",effect:he("The difficulty to recover from Disrupt or Disorient Marvels you have imposed is increased by 10."),uid:"Circling Pack"},{name:"Fighting With Fire",cost:4,description:"Fire is a useful, if dangerous, tool to use in war. Its effects on the enemy are startling: set something ablaze that they value and they will flock towards it; set something ablaze that they can afford to lose and they won\u2019t dare approach. So too must your strikes be utilized to force them into a pattern and method of your choosing. An enemy that follows your lead is not worthy of the name",effect:he("This style\u2019s Block and Dodge bonuses increase to +10 against any Disoriented or Disrupted target"),uid:"Fighting With Fire"},{name:"March Towards Hell",cost:4,description:"The wise general makes his enemies tire themselves out by forcing them to march towards his position. Once in battle, he cleverly uses his troops to dictate the maneuvers of his enemy. Your attacks follow the same philosophy; your enemies are already defeated, the slaughter a mere formality.",effect:he("You may Flood 1 die from the River while you make an attack. If you do, the strike also creates a Disorient or Disrupt condition if it hits."),uid:"March Towards Hell"},{name:"Rainfall at Night",cost:4,description:"The battlefield is where wars are ended, but to a peerless general their outcome is determined beforehand. Assassinate their officers, poison the wells, fill their hearts with propaganda, and creep inside their camps to set fires and steal horses. These are the ways of the warrior who knows neither honor nor defeat.",effect:he("This style\u2019s Strike bonus increases to +10 against any Disoriented or Disrupted target."),uid:"Rainfall at Night"},{name:"Wolves Devour the Lion",cost:4,description:"Stress bruised ribs until they crack. Lash sore flesh until it rips. The tales of glorious battle are for the halls of gold and silk, but they are built on your acts in the fields of iron and wolves.",effect:he("This style\u2019s Damage bonus increases to +15 against any Disoriented or Disrupted target."),uid:"Wolves Devour the Lion"}]},ye={name:"Boundless Prosperity Manual",uid:"Boundless Prosperity Manual",description:"One of the most famous instructions on health is the Boundless Prosperity Manual. It teaches proper breathing and exercise, and brings long life and vigorous health. Some rare copies go much further! They can teach you how to transcend mortal limitations through internal alchemy. Those who carefully decipher the clues and study the methods await a transformation to a higher state of being! These rare copies are all jealously guarded by gangs and martial masters.",element:"wood",techniques:[{level:1,name:"Retain Balanced Nature",uid:"Retain Balanced Nature",description:"You promote the circulation of breath throughout your system by clearing away pollutants and obstructions.",effect:he("You have a +5 bonus to a roll made to remove a Disoriented or Disrupted Marvel, provided the Marvel is described as being caused by pain, blocked pressure points, injuries, or similar effects. You can also make such checks using only a single die, instead of needing a set.")},{level:2,name:"Act Without Resistance",uid:"Act Without Resistance",description:"One of the many techniques of physical augmentation, the manual teaches you how to achieve a forcefulness in your movements that sweeps away opposing powers.",effect:he("You have a +10 bonus to Damage.")},{level:2,name:"Be Where You Must",uid:"Be Where You Must",description:"The key to increased physical potency isn't just greater power, but knowing when to show restraint. Precision can cut away unnecessary motion and purify your movement.",effect:de(["Round-long duration.","You have a +10 bonus to Footwork."])},{level:2,name:"Move According To Purpose",uid:"Move According To Purpose",description:"Many act without being truly aware of what they are doing. You cast aside such sleepwalking and go through life with certainty and flawlessness.",effect:he("You have a +10 bonus to Strike.")},{level:2,name:"Understand What You See",uid:"Understand What You See",description:"Hone your mind to clarity. All phenomena and occurrences will become obvious!",effect:he("You have a +10 bonus to Speed.")},{level:3,name:"Covering Weakness with Strength",uid:"Covering Weakness with Strength",description:"Many people in need of the Manual are sick, crippled or scarred. It can\u2019t restore what is truly lost, but it can help overcome the troubles these unfortunate conditions bring.",effect:de(["Round-long duration. You may spend one Chi per round to extend the technique\u2019s duration another round; you must spend the Chi at the beginning of each new round.","Treat your Injury Conditions as if they were one step less severe when determining the Action or Breath penalty they inflict.","This doesn\u2019t cure or reduce the conditions, only their effects."])},{level:3,name:"Fortifying Oneself against the World",uid:"Fortifying Oneself against the World",description:"The world is filled with harmful maladies that can damage your organs. The manual teaches methods which bolster the body against such dangers.",effect:de(["Round-long duration.","You have a +10 bonus to your Hardiness and to Chi Aura when resisting Rippling rolls caused by the Doctor\u2019s Arts."])},{level:3,name:"Reflexes Like Lightning",uid:"Reflexes Like Lightning",description:"Life is tenacious and adaptive. If you can fully attain these qualities, then you can truly be a master of yourself and of others.",effect:he("You have a +10 bonus to any Marvel or attempt to break a Wave.")},{level:4,name:"Five Elements Supreme Combination",uid:"Five Elements Supreme Combination",description:"You can use internal alchemy to directly enhance the workings of your body.",effect:de(["Round-long duration.","You have a +15 bonus to your Speed, Footwork, Strike, Damage, Block, or Toughness.","You may boost this technique, adding the bonus to another statistic for every two Chi you spend."])},{level:4,name:"King of Heaven Shapes the Earth",uid:"King of Heaven Shapes the Earth",description:"You are struck by a fatal blow, yet miraculously you are alive! You direct blood away from the open wound, dull the pain with your will, and even rearrange your internal organs to keep them away from the injury. Only someone with absolute control over their own body could perform this feat.",effect:he("When someone makes a Rippling roll against you to cause an Injury or Medical Condition, reduce the number of dice in the roll by two. You may boost this technique to remove one more die per two Chi spent. You can\u2019t reduce the number of dice below one.")},{level:5,name:"God-Body Transcendence",uid:"God-Body Transcendence",description:"The final technique of the Manual is not taught, but understood. The accumulation of physical and spiritual health has created an immortal divine body that will endure after death on a higher level of existence. It is exhausting to do so, but you can briefly bring forth this higher nature.",effect:de(["Round-long duration. You may spend Chi each round to extend the technique\u2019s duration another round; you must spend the Chi at the beginning of each new round. The first extension costs 1 chi, the second costs 2 chi, the third costs 3 chi, and so on.","Increase your Lake size by 1."])}]},be={name:"Fire Sutra",uid:"Fire Sutra",description:"Few forces in the world are as primal and respected as fire, so it is no wonder that this sutra was a common art even in ancient days, particularly in the west where the sutras are thought to have been first written. Through meditation and purification, the student learns how to excite his own yang energy to the point of ignition.",element:"fire",techniques:[{level:1,name:"Thought of Flame",uid:"Thought of Flame",description:"The most basic of techniques; once mastered, it is as easy and natural as exhalation. Internal power is gathered and expelled as yang-aspected energy.",effect:he("You can use the Burn effect as a Minor Action on your attack with a +5 bonus.")},{level:2,name:"Breath of Buddha",uid:"Breath of Buddha",description:"You expel your internal power directly in to your opponent. Normally, a transfer of inner power is used to heal, but your raging energy heats and dehydrates their body.",effect:de(["If your strike hits, and the target has purified Earth, Metal or Water chi, he doesn\u2019t recspire any spent Chi points of those types at the end of this round.","You have a +5 bonus to any Disrupt or Disorient Marvel that narratively uses heat or dehydration."])},{level:2,name:"Fire to Heaven Ascension",uid:"Fire to Heaven Ascension",description:"It is the nature of fire to grow tall and turn away from the earth. Following this example, you transform your energy and achieve similar properties.",effect:he("You have a +15 bonus to your Footwork when rolling to ascend, such as by jumping or running upwards.")},{level:2,name:"Fusing Flames",uid:"Fusing Flames",description:"Bring a flame close to fuel and it will scorch or ignite, but bring two flames together and they only merge into a greater whole. Flame cannot burn flame. Instead of expelling your yang-energy, you keep it close to the surface, so that flames leave you unharmed.",effect:de(["Round-long duration.","You have a +10 bonus to your Chi Aura when rolling to protect against Burn damage.","If one or more fighters other than you within your zone use any points of Fire Chi, you regain one additional point of normal Chi at the end of this round. You can gain only a single point this way, regardless of how many people use Fire Chi or how much they use."])},{level:2,name:"Verse of Fire",uid:"Verse of Fire",description:"A few simple words instruct the student on key points in their body to flow their internal energy through, and in what order. It\u2019s easy to learn, but the effects are spectacular: intensely hot fire!",effect:he("You can use the Burn effect as a Minor Action on your attack with a +10 bonus")},{level:3,name:"Elusive Desert Being",uid:"Elusive Desert Being",description:"The texts speak of gods and ghosts that dwell in hot and distant places. A holy man once traveled far to seek these beings out, and he impressed them with his enlightenment. They rewarded him with their secrets, which he wrote down in this sutra. It speaks of foreign monsters made of smokeless fire, their cunning trickery, and their mirages.",effect:de(["You must activate this technique while rolling initiative, and it lasts for the entire round.","You have a +10 bonus to your Speed and Footwork.","If you Dodge an attack, your opponent can negate this technique\u2019s bonus to your roll by including a Hard (30) Awareness check as a minor action on his attack roll. You may boost this technique to increase the difficulty by one step per point of Chi spent."])},{level:3,name:"Mantra of Immolation",uid:"Mantra of Immolation",description:"A profound phrase teaches a transformation of inner power to create fire so hot that it can melt iron.",effect:he("You can use the Burn effect as a Minor Action on your attack with a +15 bonus. If it forces an immediate Rippling roll, the roll receives a +5 bonus.")},{level:3,name:"Nine-Fire Seal",uid:"Nine-Fire Seal",description:"Power coruscates through your body, flooding your chakra and bringing your nature closer to that of a wildfire than that of a mere man.",effect:de(["Round-long duration.","You have a +20 bonus to your Chi Aura when rolling to protect against Burn or Freeze damage.","If you used this technique last round as well, you have a +5 bonus to your Strike this round."])},{level:4,name:"Aura of the Qilin",uid:"Aura of the Qilin",description:"The mythical Qilin symbolizes prosperity and wisdom, but its ability to surround itself in flames is more practical to you. You may not have seen such a beast yourself, but the sutras describe how to mimic this trick.",effect:de(["Round-long duration.","You have a +30 bonus to your Chi Aura when rolling to protect against Burn or Freeze damage.","If you score a critical success on a Dodge roll, you may Reply against your opponent and inflict one Ripple."])},{level:4,name:"The Sun Scripture",uid:"The Sun Scripture",description:"The sun is a heavenly fire of such strength that it can\u2019t reside on the earth. Your yang-energy approaches divine nature: you can create fire more brilliant than any torch, hearth, or forge.",effect:he("You can use the Burn effect as a Minor Action on your attack with a +20 bonus. If it forces an immediate Rippling roll, the roll receives a +10 bonus.")},{level:5,name:"Prayer of Cosmic Rebirth",uid:"Prayer of Cosmic Rebirth",description:"Religious texts describe the death and resurrection of the universe. A cleansing fire will consume all material existence, and so purge impurities. With a display of utmost skill and benevolence, you call upon the brightest fire that resides within the human spirit to free a life from its current, unclean incarnation.",effect:he("You can use the Burn effect as a Minor Action on your attack with a +20 bonus. If it forces an immediate Rippling roll, the roll receives a +15 bonus; any Chi Aura used to protect against this damage costs 2 Chi points per die to purchase.")}]},ve=[fe,me],ge=[ye,be];function Ee(e){switch(e){case ae:case oe:return;default:throw new Error('Invalid kung fu type : "'+e+'"')}}function Oe(e,t){if(Ee(e),e===ae){if(ve.filter((function(e){return e.uid===t})).length<1)throw new Error('Invalid external kungfu "'+t+'"')}else if(ge.filter((function(e){return e.uid===t})).length<1)throw new Error('Invalid internal kungfu "'+t+'"')}function ke(e,t,n){if(Oe(e,t),e===ae){if(ve.filter((function(e){return e.uid===t&&e.techniques.filter((function(e){return e.uid===n})).length>0})).length<1)throw new Error('Invalid external kungfu technique "'+n+'" for style "'+t+'"')}else if(ge.filter((function(e){return e.uid===t&&e.techniques.filter((function(e){return e.uid===n})).length>0})).length<1)throw new Error('Invalid internal kungfu technique "'+n+'" for style "'+t+'"')}function we(e,t){return e===ae?"general":je(oe,t).element}function je(e,t){if(e===ae){var n=ve.findIndex((function(e){return e.uid===t}));return ve[n]}var r=ge.findIndex((function(e){return e.uid===t}));return ge[r]}function Ce(e,t,n){if(e===ae){var r=ve.findIndex((function(e){return e.uid===t})),i=ve[r].techniques.findIndex((function(e){return e.uid===n}));return ve[r].techniques[i]}var a=ge.findIndex((function(e){return e.uid===t})),o=ge[a].techniques.findIndex((function(e){return e.uid===n}));return ge[a].techniques[o]}function Se(e,t,n){if(n){var r=t,i=n.map((function(t){var n=e.discounts[t],i=Math.min(r,n.value),a=n.value-i;return r-=i,{idx:t,newValue:a}}));return{canPay:e.destiny>=r,destiny:r,discounts:i,original:t}}return{canPay:e.destiny>=t,destiny:t,original:t}}function Te(e,t){if(!t.canPay)throw new Error("Unpayable cost");if(e.destiny-=t.destiny,e.destiny<0)throw new Error("Negative destiny reached");!function(e,t){t.discounts&&t.discounts.forEach((function(t){e.discounts[t.idx].value=t.newValue,0===t.newValue&&e.discounts.splice(t.idx,1)}))}(e,t)}function Be(e,t){return Se(e,2,B(e,(function(e){return e.type===O&&(0===e.skills.length||-1!==e.skills.findIndex((function(e){return e===t})))})))}function Ie(e){return Se(e,2,[])}function Ne(e,t){var n=e.chi[t].value,r="general"===t?1:"corrupt"===t||"enlightened"===t?10:5,i=n<1?r:r*n;return Se(e,Math.max(0,i-e.chi[t].cultivation),B(e,(function(e){return e.type===E&&(0===e.chis.length||-1!==e.chis.findIndex((function(e){return e===t})))})))}function Ae(e,t){return Se(e,te(t).cost,B(e,(function(e){return e.type===k&&(0===e.uids.length||-1!==e.uids.findIndex((function(e){return e===t})))})))}function xe(e,t,n,r){return Se(e,r,B(e,(function(e){return e.type===w&&(0===e.uids.length||-1!==e.uids.findIndex((function(e){return e.lsUid===t&&-1!==e.optUid.findIndex((function(e){return n===e}))})))})))}function Pe(e,t,n){var r=ie(t,n).cost;if("number"===typeof r)return[xe(e,t,n,r)];var i=r.max-r.min+1;return Array.from(new Array(i).keys()).map((function(e){return r.min+e})).map((function(r){return xe(e,t,n,r)}))}function Fe(e,t,n){return Se(e,5,B(e,(function(e){return e.type===S&&(0===e.virtues.length||-1!==e.virtues.findIndex((function(e){return e.name===t&&e.type===n})))})))}function qe(e,t,n){return Se(e,10,B(e,(function(e){return e.type===j&&(e.kfType===t&&(0===e.uids.length||-1!==e.uids.findIndex((function(e){return e===n}))))})))}function De(e,t,n,r){var i=Ce(t,n,r);return Se(e,t===ae?i.cost:i.level)}var Ue=["general","wood","fire","earth","water","metal","enlightened","corrupt"];function Re(){var e={};return Ue.forEach((function(t){e[t]={value:0,cultivation:0}})),e}function We(e,t,n){e[t].value+=n}function Le(e,t,n){for(var r=e[t].cultivation+n,i=e[t].value,a="enlightened"===t||"corrupt"===t?10:"general"!==t?5:1;r-a*Math.max(1,i)>=0;)r-=a*Math.max(1,i),i++;e[t].value=i,e[t].cultivation=r}var Me=[{bonuses:[],breath:"Hardiness",description:"Warriors are by far the most common of the five archetypes. Although all people within the martial arts society are good at fighting, it is the warriors who truly embrace it as their way of life. They are the swordsmen and pugilists, constables and assassins, as well as the most iconic heroes and villains.",key:"warrior",name:"Warrior"},{bonuses:[],breath:"WuWei",description:"Despite the name, they are not simple religious administrators; they are the Daoists, wise men and women whose approach to fighting starts with Chi cultivation first and foremost. In a world where inner power is of utmost importance, priests are widely respected.",key:"priest",name:"Priest"},{bonuses:[],breath:"Confidence",description:"Courtiers wield power not just over themselves but also over others. They are the rulers, merchants, envoys and entertainers that shape society and its people. In a subtle way they are the most powerful of all people; a general may win a war but it\u2019s his king who decides whether there is war at all.",key:"courtier",name:"Courtier"},{bonuses:[],breath:"Learning",description:"Scholars are the educated masters, the lore keepers, inventors and advisors. With their knowledge about the workings of the world they perceive events like few others do. Scholars are often found debating how best to rule an empire, hunting for long-lost manuals written in Sanskrit or studying things from exotic foreign lands.",key:"scholar",name:"Scholar"},{bonuses:[],breath:"Medicine",description:"Doctors are the least prominent of all five archetypes. Although the medical profession is by no means unheard of, relatively few of them involve themselves in the martial arts realm. Those that do have the potential to become greatly respected allies and feared enemies, literally masters over life and death.",key:"doctor",name:"Doctor"}];var He="VIRTUE_CHIVALROUS",_e="VIRTUE_SELFISH",Ye=[{name:"Honor",type:He},{name:"Benevolence",type:He},{name:"Righteousness",type:He},{name:"Loyalty",type:He},{name:"Force",type:He},{name:"Revenge",type:_e},{name:"Individualism",type:_e},{name:"Obsession",type:_e},{name:"Ruthlessness",type:_e},{name:"Ferocity",type:_e}],Ke={Awareness:["Hear","See","Smell","Taste","Touch"],Confidence:["Appear steadfast","Focus on Breath (for Courtiers)","Recover from the Disorient Marvel","Resist Courtier\u2019s Arts"],Crafting:["Armor","Buildings","Cloth","Cooking","Gardening","Painting","Tools","Weapons"],Finesse:["Acrobatics","Cheating","Escaping Bonds","Picking Pockets","Sleight of Hand"],Hardiness:["Disease","Focusing on Breath (for Warriors)","Poison","Recovering From Injuries","Staying Awake","Enduring Torture"],Inspire:["Debating","Intimidation","Outright Lies","Public Speeches","Specific Courtier\u2019s Arts techniques","Spinning the Facts"],Learning:["Calligraphy","Focus on Breath (for Scholars)","History","Math","Other Cultures","Philosophy","Specific Scholar\u2019s Arts Techniques"],Medicine:["Disease","Focus on Breath (for Doctors)","Injuries","Poison","Pressure Points","Specific Doctor\u2019s Arts Techniques"],Might:["Breaking","Lifting","Pushing","Throwing"],Perform:["Acting","Ceremonial Performances","Dancing","Poetry","Singing","Music"],Politics:["Specific region or faction"],Ride:["Caring for Your Horse","Coaxing Your Horse into Dangerous Terrain","Racing"],Stealth:["Camouflage","Deception","Eavesdropping","In Shadows","Silence","Smuggling"],Survival:["At Sea","Cities","Deserts","Forests","Mountains","Prisons"],Tactics:["Battlefield Analysis","Disruption","Escorting Caravans","Sieging Fortresses","Specific Warrior\u2019s Arts Techniques"],"Wu Wei":["Focusing on Breath (for Priests)","Resisting Curses","Sensing Chi","Social Perception","Specific Priest\u2019s Arts Techniques"]};function Ge(e,t){return t&&t.length>0?{skills:t,type:O,value:e}:{skills:Object.keys(Ke),type:O,value:e}}function ze(e,t,n){return n&&n.length>0?{type:j,kfType:t,uids:n,value:e}:{type:j,kfType:t,uids:[],value:e}}function Ve(){return function(e,t){return{type:S,virtues:t,value:e}}(75,[{name:"Honor",type:He},{name:"Benevolence",type:He},{name:"Righteousness",type:He},{name:"Loyalty",type:He},{name:"Force",type:He},{name:"Revenge",type:_e},{name:"Individualism",type:_e},{name:"Obsession",type:_e},{name:"Ruthlessness",type:_e},{name:"Ferocity",type:_e}])}var Je=[{description:"River size and Joss limit are 1, no Aura or Chi replenishment, Lake is 5, maximum skill bonus is +5.",name:"Unranked",perks:[H(10),Ge(10),_(8,"general"),Ve()],value:0},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 1. Lake size is 6. Maximum skill bonus is +5.",name:"5th Rank",perks:[H(15),Ge(10),_(8,"general"),Ve()],value:1},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 2. Lake size is 7. Maximum skill bonus is +10.",name:"4th Rank",perks:[H(20),Ge(20),_(10,"general"),ze(10,ae),ze(10,oe),Ve()],value:2},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 3. Lake size is 8. Maximum skill bonus is +15.",name:"3rd Rank",perks:[H(50),Ge(20),_(10,"general"),ze(10,ae),ze(10,oe),Ve()],value:3},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 4. Lake size is 9. Maximum skill bonus is +20.",name:"2nd Rank",perks:[H(100),Ge(20),_(10,"general"),ze(10,ae),ze(10,oe),Ve()],value:4},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 5. Lake size is 10. Maximum skill bonus is +25.",name:"1st Rank",perks:[H(150),Ge(20),_(10,"general"),Ve()],value:5}];function Qe(e){return Je.find((function(t){return t.value===e}))}var Xe=Object(y.createAction)("header/SET_NAME",(function(e){return function(t){return e({name:t})}})),Ze=Object(y.createAction)("header/SET_CONCEPT",(function(e){return function(t){return e({concept:t})}})),$e=Object(y.createAction)("header/SET_ARCHETYPE",(function(e){return function(t){return function(e){if(!Me.find((function(t){return t.key===e})))throw new Error('Invalid archetype "'+e+'"')}(t),e({archetype:t})}})),et=Object(y.createAction)("header/SET_RANK",(function(e){return function(t){return function(e){if(!Je.find((function(t){return t.value===e})))throw new Error('Invalid rank "'+e+'"')}(t),e({rank:t})}}));function tt(e){switch(e.type){case P:case F:case q:case D:case U:case R:case W:case L:case M:return!0;case x:default:return!1}}function nt(e){return e.rank?Math.max(5,5*e.rank):5}function rt(e,t,n){if(ut(e,t).value+5>n)throw new Error("Skill "+t+" overflow");ut(e,t).value+=5}function it(e,t,n){return-1!==e.find((function(e){return e.name===t})).specialities.findIndex((function(e){return e===n}))}function at(e,t,n){if(it(e,t,n))throw new Error('Something went wrong, speciality "'+n+'" for skill "'+t+'" already bought');ut(e,t).specialities.push(n)}function ot(e,t){return!(ct(e,t).value+5>nt(e))}function st(e,t,n){return!it(e.skills,t,n)}function ut(e,t){return e.find((function(e){return e.name===t}))}function ct(e,t){return ut(e.skills,t)}function lt(e,t){return-1!==Object.keys(e).findIndex((function(e){return e===t}))}function dt(e,t,n){return void 0!==e[t]&&-1!==e[t].findIndex((function(e){return e.uid===n}))}function ht(e,t){return!lt(e.loresheets,t)}function pt(e,t){return e||t}function ft(e,t){return e&&t}function mt(e,t,n){if(!lt(e,t))return!1;var r=ie(t,n);return dt(e,t,n)?!!function(e){return te(e).type===N}(t)&&r.repeatable:r.prerequisites.map((function(n){return function(e,t,n){return"string"===typeof n?dt(e,t,n):n.prerequisites.map((function(n){return dt(e,t,n)})).reduce("OR"===n.type?pt:ft,"OR"!==n.type)}(e,t,n)})).reduce(ft,!0)}function yt(e,t,n,r){if($(t),ee(t,n),!mt(e,t,n))throw new Error("Internal error : impossible to buy loresheet option "+t+","+n);e[t].push({uid:n,payload:r})}function bt(e,t){$(t),e[t]=[]}function vt(e,t){t.filter((function(e){return tt(e)})).forEach((function(t){switch(t.type){case P:e.destiny+=t.value;break;case F:e.entanglement+=t.value;break;case q:We(e.chi,t.chi,t.value);break;case D:Le(e.chi,t.chi,t.value);break;case R:var n=nt(e);rt(e.skills,t.skill,n);break;case W:at(e.skills,t.skill,t.speciality);break;case L:bt(e.loresheets,t.lsUid);break;case M:yt(e.loresheets,t.lsUid,t.uid,t.payload)}}))}function gt(e,t){var n=Qe(t);e.rank=n.value,vt(e,n.perks.filter((function(e){return tt(e)}))),function(e,t){t.filter((function(e){return T(e)})).forEach((function(t){e.discounts.push(t)}))}(e,n.perks.filter((function(e){return T(e)})))}var Et=Object(y.createAction)("kungfu/OPEN_STYLE",(function(e){return function(t,n,r){return Ee(n),Oe(n,t),e({uid:t,kungfuType:n,cost:r})}})),Ot=Object(y.createAction)("kungfu/BUY_TECHNIQUE",(function(e){return function(t,n,r,i){return Ee(r),Oe(r,t),ke(r,t,n),e({cost:i,kungfuType:r,styleUid:t,uid:n})}})),kt=Object(y.createAction)("kungfu/CUSTOM_NAME_FOR_STYLE",(function(e){return function(t,n,r){if(Ee(n),Oe(n,t),r.length<1)throw new Error("Invalid new name");return e({kungfuType:n,name:r,uid:t})}})),wt=Object(y.createAction)("kungfu/CUSTOM_NAME_FOR_TECHNIQUE",(function(e){return function(t,n,r,i){if(Ee(r),Oe(r,t),ke(r,t,n),i.length<1)throw new Error("Invalid new name");return e({kungfuType:r,name:i,styleUid:t,uid:n})}})),jt=n(34),Ct=n(49);function St(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tt(e,t,n){return-1!==Object.keys(e[t]).findIndex((function(e){return e===n}))}function Bt(e,t,n,r){return!!Tt(e,t,n)&&-1!==e[t][n].findIndex((function(e){return e===r}))}function It(e,t){var n=je(ae,t).statistics;if(!Tt(e,ae,t))return n;var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?St(n,!0).forEach((function(t){Object(Ct.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):St(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},n);return e[ae][t].forEach((function(e){var n=Ce(ae,t,e);switch(n.effect.type){case se:r[n.effect.statistic]+=n.effect.increase}})),r}function Nt(e,t,n){return!Tt(e,t,n)}function At(e,t,n,r){if(!Tt(e,t,n))return!1;if(Bt(e,t,n,r))return!1;if(t===ae)return!0;if(e.noRestrictionInternal&&-1!==e.noRestrictionInternal.findIndex((function(e){return e===n})))return!0;var i=function(e,t){return e[oe][t].map((function(e){return Ce(oe,t,e).level})).sort()}(e,n),a=Ce(oe,n,r);return 0===i.length&&1===a.level||Math.max.apply(Math,Object(jt.a)(i))===a.level-1}function xt(e,t){switch(t.type){case Object(y.getType)(Et):return Object(m.b)(e,(function(e){Te(e,t.payload.cost),function(e,t,n){if(Oe(t,n),Tt(e,t,n))throw new Error("Internal error : style already open");if(e[t][n]=[],t===oe){var r=je(oe,n).techniques.filter((function(e){return 1===e.level}));if(1!==r.length)throw new Error("Internal error : internal style malformed, more than 1 lvl 1 techniques for "+n);e[t][n].push(r[0].uid)}}(e.kungfu,t.payload.kungfuType,t.payload.uid),Le(e.chi,we(t.payload.kungfuType,t.payload.uid),t.payload.cost.original)}));case Object(y.getType)(Ot):return Object(m.b)(e,(function(e){Te(e,t.payload.cost),function(e,t,n,r){if(Oe(t,n),ke(t,n,r),!Tt(e,t,n))throw new Error("Internal error : style not open");if(Bt(e,t,n,r))throw new Error("Internal error : technique already presents");e[t][n].push(r)}(e.kungfu,t.payload.kungfuType,t.payload.styleUid,t.payload.uid),Le(e.chi,we(t.payload.kungfuType,t.payload.styleUid),t.payload.cost.original)}));case Object(y.getType)(kt):case Object(y.getType)(wt):}return e}var Pt=Object(y.createAction)("loresheet/OPEN",(function(e){return function(t,n){return $(t),e({cost:n,uid:t})}})),Ft=Object(y.createAction)("loresheet/BUY_OPTION",(function(e){return function(t,n,r,i){return ee(t,n),e({cost:r,lsUid:t,uid:n,payload:i})}}));var qt=Object(y.createAction)("skills/BUY",(function(e){return function(t,n){return e({cost:n,name:t})}})),Dt=Object(y.createAction)("skills/BUY_SPECIALITY",(function(e){return function(t,n,r){if(0===n.length)throw new Error("Empty speciality");return e({cost:r,skill:t,speciality:n})}}));var Ut=Object(y.createAction)("virtues/INCREASE",(function(e){return function(t,n,r){return e({name:t,value:n,cost:r})}}));function Rt(e,t){return-1!==e.findIndex((function(e){return t===e.name}))}function Wt(e,t){var n=e.virtues.findIndex((function(e){return t===e.name}));return-1!==n&&!(e.virtues[n].value+1>5)}function Lt(e,t){switch(t.type){case Object(y.getType)(Ut):return Object(m.a)(e,(function(e){Te(e,t.payload.cost),function(e,t,n){if(!Rt(e,t))throw new Error("Internal Error : unknwon new virtue "+t);e.forEach((function(e){e.name===t&&(e.value+=n)}))}(e.virtues,t.payload.name,t.payload.value)}))}return e}function Mt(e,t){return e?Object(m.b)(e,(function(n){return Object(y.isActionOf)(Object.values(i),t)&&(n=function(e,t){switch(t.type){case Object(y.getType)(g):return Object(m.b)(e,(function(e){Te(e,t.payload.cost),We(e.chi,t.payload.chi,t.payload.value)}))}return e}(e,t)),Object(y.isActionOf)(Object.values(a),t)&&(n=function(e,t){switch(t.type){case Object(y.getType)(Xe):return Object(m.b)(e,(function(e){e.name=t.payload.name}));case Object(y.getType)(Ze):return Object(m.b)(e,(function(e){e.concept=t.payload.concept}));case Object(y.getType)(et):return Object(m.b)(e,(function(e){gt(e,t.payload.rank)}));case Object(y.getType)($e):return Object(m.b)(e,(function(e){e.archetype=t.payload.archetype}))}return e}(e,t)),Object(y.isActionOf)(Object.values(r),t)&&(n=function(e,t){switch(t.type){case Object(y.getType)(v):return Yt();case Object(y.getType)(b):return e.history.length===t.payload.id+1?e:Ht(Yt(),e.history.slice(0,t.payload.id+1));default:return e}}(e,t)),Object(y.isActionOf)(Object.values(o),t)&&(n=xt(e,t)),Object(y.isActionOf)(Object.values(s),t)&&(n=function(e,t){switch(t.type){case Object(y.getType)(Pt):return Object(m.a)(e,(function(e){Te(e,t.payload.cost),bt(e.loresheets,t.payload.uid)}));case Object(y.getType)(Ft):return Object(m.a)(e,(function(e){Te(e,t.payload.cost),yt(e.loresheets,t.payload.lsUid,t.payload.uid,t.payload.payload)}))}return e}(e,t)),Object(y.isActionOf)(Object.values(u),t)&&(n=function(e,t){switch(t.type){case Object(y.getType)(qt):return Object(m.a)(e,(function(n){var r=nt(e);Te(n,t.payload.cost),rt(n.skills,t.payload.name,r)}));case Object(y.getType)(Dt):return Object(m.a)(e,(function(e){Te(e,t.payload.cost),at(e.skills,t.payload.skill,t.payload.speciality)}))}return e}(e,t)),Object(y.isActionOf)(Object.values(c),t)&&(n=Lt(e,t)),n})):Mt(Kt(),t)}function Ht(e,t){return Object(m.b)(e,(function(e){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){var s=a.value;e=Mt(e,s),s.type!==Object(y.getType)(v)&&e.history.push(s)}}catch(u){r=!0,i=u}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}))}function _t(){return function(){var e=[],t=Z((function(e){return void 0!==e.perks})).map((function(e){return e.perks?e.perks:[]})).filter((function(e){return function(e){if(e&&"type"in e)switch(e.type){case G:case z:return!0}return!1}(e)})).reduce((function(e,t){return e.concat(t)}),[]);return e.push.apply(e,Object(jt.a)(t)),e}()}function Yt(){return{archetype:void 0,concept:void 0,name:void 0,rank:void 0,destiny:0,entanglement:0,history:[v()],chi:Re(),kungfu:{KUNGFU_EXTERNAL:{},KUNGFU_INTERNAL:{},noRestrictionInternal:[]},loresheets:{},skills:Object.keys(Ke).map((function(e){return{name:e,specialities:[],value:0}})),virtues:Ye.map((function(e){return{name:e.name,value:0,type:e.type}})),automatics:_t(),discounts:[]}}function Kt(){return Yt()}var Gt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function zt(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}n(112),n(113),n(114);var Vt=n(2),Jt=n(6),Qt=n(4),Xt=n(3),Zt=n(5),$t=n(199),en=n(198),tn=n(7),nn=n(14),rn=n.n(nn),an=n(190),on=(n(120),function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).toggle=n.toggle.bind(Object(tn.a)(n)),n.state={isOpen:!1},n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return p.createElement("nav",{className:"navbar"},p.createElement("ul",{className:"left"},p.createElement(an.a,{to:"/"},p.createElement("li",null,p.createElement("h1",null,"LotWCS"))),p.createElement(an.a,{to:"/skills"},p.createElement("li",null,"Skills")),p.createElement(an.a,{to:"/chi"},p.createElement("li",null,"Chi")),p.createElement(an.a,{to:"/virtues"},p.createElement("li",null,"Virtues")),p.createElement(an.a,{to:"/equipment"},p.createElement("li",null,"Equipment")),p.createElement(an.a,{to:"/conditions"},p.createElement("li",null,"Conditions")),p.createElement(an.a,{to:"/kungfu"},p.createElement("li",null,"Kung\xa0Fu")),p.createElement(an.a,{to:"/loresheets"},p.createElement("li",null,"Loresheets")),p.createElement(an.a,{to:"/secretarts"},p.createElement("li",null,"Secret Arts")),p.createElement(an.a,{to:"/history"},p.createElement("li",null,"History"))),p.createElement("ul",{className:"right"},p.createElement(an.a,{to:"/print"},p.createElement("li",null,"Full sheet")),p.createElement(an.a,{to:"/config"},p.createElement("li",null,p.createElement(rn.a,{name:"cog"})))))}}]),t}(p.PureComponent)),sn=(n(121),function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("section",{className:"app-intro"},this.props.children)}}]),t}(p.PureComponent)),un=(n(122),function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("section",{className:"app-page"},this.props.children)}}]),t}(p.PureComponent)),cn={display:"block",textAlign:"center"},ln=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("h4",{style:cn},p.createElement("span",{className:"align-text-middle"},this.props.label))}}]),t}(p.PureComponent),dn=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).state={dropdownOpen:!1,edit:!1,value:n.props.default?n.props.default:""},n.startEdit=n.startEdit.bind(Object(tn.a)(n)),n.endEdit=n.endEdit.bind(Object(tn.a)(n)),n.toggleDDL=n.toggleDDL.bind(Object(tn.a)(n)),n.select=n.select.bind(Object(tn.a)(n)),n.getLabelForSelectedKey=n.getLabelForSelectedKey.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n.renderDropdownList=n.renderDropdownList.bind(Object(tn.a)(n)),n.renderDropdownItems=n.renderDropdownItems.bind(Object(tn.a)(n)),n.renderHeader=n.renderHeader.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.edit||(t.value=e.default?e.default:""),t}}]),Object(Jt.a)(t,[{key:"render",value:function(){return this.state.edit?this.renderDropdownList():this.renderValue()}},{key:"startEdit",value:function(){this.props.locked||this.setState({edit:!0,dropdownOpen:!1})}},{key:"endEdit",value:function(){this.setState({edit:!1,dropdownOpen:!1});var e=this.getLabelForSelectedKey();this.state.value!==this.props.default&&e.length>0&&this.props.onSubmit(this.state.value)}},{key:"toggleDDL",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"select",value:function(e){this.setState({value:e})}},{key:"getLabelForSelectedKey",value:function(){var e=this;return this.props.values.map((function(t){var n=t.key,r=t.label;return n===e.state.value?r:""})).filter((function(e){return""!==e})).join(", ")}},{key:"renderHeader",value:function(){return p.createElement(ln,{label:this.props.header})}},{key:"renderButton",value:function(e){var t=p.createElement("button",{onClick:this.endEdit,color:"success"},p.createElement(rn.a,{name:"check"})),n=p.createElement("button",{onClick:this.endEdit,color:"danger"},p.createElement(rn.a,{name:"times"}));return e.length>0?t:n}},{key:"renderDropdownItems",value:function(){var e=this;return this.props.values.map((function(t){var n=t.key,r=t.label;return p.createElement("div",{key:n,onClick:function(){return e.select(n)}},r)}))}},{key:"renderDropdownList",value:function(){var e=this.getLabelForSelectedKey();return p.createElement("div",null,p.createElement("div",null,this.renderHeader()),p.createElement("div",null,p.createElement("div",null,p.createElement("div",null,e.length>0?e:"Choose a "+this.props.header),p.createElement("div",null,this.renderDropdownItems())),this.renderButton(e)))}},{key:"renderValue",value:function(){var e=this.getLabelForSelectedKey();return p.createElement("div",{onClick:this.startEdit,role:"button"},p.createElement("div",null,this.renderHeader()),p.createElement("div",null,e.length>0?e:this.state.value))}}]),t}(p.PureComponent),hn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement(dn,{header:"Character Archetype",default:this.props.value,values:Me.sort((function(e,t){return e.name<t.name?-1:e.name>t.name?1:0})).map((function(e){return{key:e.key,label:e.name}})),onSubmit:this.props.onChange,locked:this.props.locked})}}]),t}(p.PureComponent);var pn=Object(l.b)((function(e){return{locked:void 0!==e.archetype,value:void 0!==e.archetype?e.archetype:""}}),(function(e){return{onChange:function(t){return e($e(t))}}}),(function(e,t){return Object.assign({},e,t)}))(hn),fn=n(191),mn=n(192),yn=n(200),bn=n(193),vn=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).state={edit:!1,value:n.props.default?n.props.default:""},n.componentWillReceiveProps=n.componentWillReceiveProps.bind(Object(tn.a)(n)),n.startEdit=n.startEdit.bind(Object(tn.a)(n)),n.endEdit=n.endEdit.bind(Object(tn.a)(n)),n.textChange=n.textChange.bind(Object(tn.a)(n)),n.renderEdit=n.renderEdit.bind(Object(tn.a)(n)),n.renderNoEdit=n.renderNoEdit.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return this.state.edit?this.renderEdit():this.renderNoEdit()}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.default?e.default:""})}},{key:"startEdit",value:function(){this.props.locked||this.setState({edit:!0})}},{key:"endEdit",value:function(){this.setState({edit:!1,value:this.state.value.trim()}),this.props.validate(this.state.value)&&this.state.value!==this.props.default&&this.props.onSubmit(this.state.value)}},{key:"textChange",value:function(e){this.setState({value:e.target.value})}},{key:"renderButton",value:function(e){var t=p.createElement(fn.a,{onClick:this.endEdit,color:"success"},p.createElement(rn.a,{name:"check"})),n=p.createElement(fn.a,{onClick:this.endEdit,color:"danger"},p.createElement(rn.a,{name:"times"}));return e?t:n}},{key:"renderNoEdit",value:function(){return p.createElement("div",{onClick:this.startEdit,role:"button"},p.createElement(mn.a,null,p.createElement(yn.a,{addonType:"prepend"},this.props.header),p.createElement("div",{className:"form-control"},this.state.value)))}},{key:"renderEdit",value:function(){var e=this.props.validate(this.state.value);return p.createElement("div",null,p.createElement(mn.a,null,p.createElement(yn.a,{addonType:"prepend"},this.props.header),p.createElement(bn.a,{onChange:this.textChange,value:this.state.value,placeholder:this.state.value,valid:e}),p.createElement(yn.a,{addonType:"append"},this.renderButton(e))))}}]),t}(p.PureComponent),gn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement(vn,{header:"Character Concept",default:this.props.value,validate:this.isStringNotNull,onSubmit:this.props.onChange})}},{key:"isStringNotNull",value:function(e){return e.trim().length>0}}]),t}(p.PureComponent);var En=Object(l.b)((function(e){return{value:void 0!==e.concept?e.concept:""}}),(function(e){return{onChange:function(t){return e(Ze(t))}}}),(function(e,t){return Object.assign({},e,t)}))(gn),On=function(e){function t(){var e,n;Object(Vt.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(Qt.a)(this,(e=Object(Xt.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return p.createElement(mn.a,null,p.createElement(yn.a,{addonType:"prepend"},n.props.header),p.createElement("div",{className:"form-control"},n.props.value))},n}return Object(Zt.a)(t,e),t}(p.PureComponent),kn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement(On,{header:"Destiny",value:this.props.value.toString()})}}]),t}(p.PureComponent);var wn=Object(l.b)((function(e){return{value:e.destiny}}))(kn),jn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement(On,{header:"Entanglement",value:this.props.value.toString()})}}]),t}(p.PureComponent);var Cn=Object(l.b)((function(e){return{value:e.entanglement}}))(jn),Sn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement(vn,{header:"Character Name",default:this.props.value,validate:this.isStringNotNull,onSubmit:this.props.onChange})}},{key:"isStringNotNull",value:function(e){return e.trim().length>0}}]),t}(p.PureComponent);var Tn=Object(l.b)((function(e){return{value:void 0!==e.name?e.name:""}}),(function(e){return{onChange:function(t){return e(Xe(t))}}}),(function(e,t){return Object.assign({},e,t)}))(Sn),Bn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=Qe(this.props.rank);return p.createElement(dn,{header:"Character Rank",default:e?e.name:"",values:Je.map((function(e){return{key:e.value.toString(),label:e.name}})),onSubmit:this.props.onChange,locked:this.props.locked})}}]),t}(p.PureComponent);var In=Object(l.b)((function(e){return{locked:void 0!==e.archetype,rank:e.rank}}),(function(e){return{onChange:function(t){return e(et(Number(t)))}}}),(function(e,t){return Object.assign({},e,t)}))(Bn),Nn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(Tn,null),p.createElement(En,null),p.createElement(pn,null),p.createElement(In,null),p.createElement(wn,null),p.createElement(Cn,null)))}}]),t}(p.PureComponent),An=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).state={edit:!1},n.startEdit=n.startEdit.bind(Object(tn.a)(n)),n.endEdit=n.endEdit.bind(Object(tn.a)(n)),n.doBuy=n.doBuy.bind(Object(tn.a)(n)),n.renderHeader=n.renderHeader.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return this.state.edit?p.createElement(mn.a,null,p.createElement(yn.a,{addonType:"prepend"},this.props.name),p.createElement("div",{className:"form-control"},this.props.value),p.createElement(yn.a,{addonType:"append"},this.props.canBuy?this.renderButton("plus",this.doBuy):null,this.renderButton("times",this.endEdit))):p.createElement(mn.a,{onClick:this.startEdit,role:"button"},p.createElement(yn.a,{addonType:"prepend"},this.props.name),p.createElement("div",{className:"form-control"},this.props.value))}},{key:"componentDidUpdate",value:function(){this.state.edit&&!this.props.canBuy&&this.endEdit()}},{key:"startEdit",value:function(){this.props.canBuy&&this.setState({edit:!0})}},{key:"endEdit",value:function(){this.setState({edit:!1})}},{key:"doBuy",value:function(){this.props.onBuy()}},{key:"renderHeader",value:function(){return p.createElement(ln,{label:this.props.name})}},{key:"renderButton",value:function(e,t){return p.createElement(fn.a,{onClick:t},p.createElement(rn.a,{name:e}))}}]),t}(p.PureComponent),xn=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement(An,{name:this.props.name,value:this.props.value,canBuy:this.props.canBuy&&this.props.cost.canPay,onBuy:this.onBuy})}},{key:"onBuy",value:function(){this.props.onBuy(this.props.cost)}}]),t}(p.PureComponent);var Pn=Object(l.b)((function(e,t){return{canBuy:ot(e,t.name),cost:Be(e,t.name),name:t.name,value:ct(e,t.name).value}}),(function(e,t){return{onBuy:function(n){e(qt(t.name,n))}}}),(function(e,t){return Object.assign({},e,t)}))(xn),Fn=(n(123),function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).idKey=void 0,n.labelKey=void 0,n.labelKey=n.props.labelKey?n.props.labelKey:t.defaultProps.labelKey,n.idKey=n.props.idKey?n.props.idKey:t.defaultProps.idKey,n.state={focused:!1,input:""},n.inputChange=n.inputChange.bind(Object(tn.a)(n)),n.onBlur=n.onBlur.bind(Object(tn.a)(n)),n.onFocus=n.onFocus.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",{className:"form-control"},p.createElement("div",{className:"TokenInput"},p.createElement("div",{className:"TokenInput-token-list"},this.renderTokens()),p.createElement("div",{className:"TokenInput-dropdown"},p.createElement("input",{className:"TokenInput-input",onBlur:this.onBlur,onChange:this.inputChange,onFocus:this.onFocus,value:this.state.input}),p.createElement("div",{className:"TokenInput-dropdown-content"},this.renderSuggestion(),this.renderAddNew()))))}},{key:"renderTokens",value:function(){return this.props.tokens.map((function(e){return p.createElement("span",{key:e,className:"TokenInput-token"},e)}))}},{key:"renderSuggestion",value:function(){var e=this;return this.matchOptionsWithInput(!1).filter((function(t){return t[e.labelKey].length>0})).filter((function(t){var n=t[e.labelKey],r=t[e.idKey];return!(!n||!r)})).map((function(t){var n=t[e.labelKey],r=t[e.idKey];return p.createElement("span",{key:r,onMouseDown:function(){e.props.onAdd(r),e.resetState()}},n)}))}},{key:"renderAddNew",value:function(){var e=this;if(this.state.focused&&this.props.allowNew&&this.state.input.length>0&&0===this.matchOptionsWithInput(!0).length){return p.createElement("span",{id:"addNew",onMouseDown:function(){e.props.onAdd(e.state.input),e.resetState()}},"Add a new entry : ",this.state.input)}}},{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){}},{key:"inputChange",value:function(e){this.setState({input:e.target.value.trim()})}},{key:"resetState",value:function(){this.setState({input:""})}},{key:"matchOptionsWithInput",value:function(e){var t=this;if(!this.state.focused)return[];var n=this.state.input.toLowerCase().trim();return this.props.options.filter((function(e){return!t.props.tokens||!t.props.tokens.some((function(n){return n===e[t.labelKey]}))})).filter((function(r){var i=r[t.labelKey];if(!i)return!1;var a=i.toLowerCase().trim();return!e&&t.state.input.length>0?-1!==a.indexOf(n):!e||n===a}))}}]),t}(p.PureComponent));Fn.defaultProps={idKey:"id",labelKey:"name"};var qn=Fn,Dn=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).state={edit:!1},n.startEdit=n.startEdit.bind(Object(tn.a)(n)),n.endEdit=n.endEdit.bind(Object(tn.a)(n)),n.isValueValid=n.isValueValid.bind(Object(tn.a)(n)),n.buySpeciality=n.buySpeciality.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n.renderBoughtSpecialities=n.renderBoughtSpecialities.bind(Object(tn.a)(n)),n.renderNoEdit=n.renderNoEdit.bind(Object(tn.a)(n)),n.renderEdit=n.renderEdit.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return this.state.edit?this.renderEdit():this.renderNoEdit()}},{key:"renderButton",value:function(e,t,n){return p.createElement(fn.a,{onClick:n,color:t},p.createElement(rn.a,{name:e}))}},{key:"renderBoughtSpecialities",value:function(){return this.props.bought.map((function(e,t){return(t>0?", ":"")+e}))}},{key:"renderNoEdit",value:function(){var e=this.props.specialities.some((function(e){return e.canBuy&&e.cost.canPay}));return p.createElement(mn.a,{onClick:this.startEdit,role:"button"},p.createElement("div",{className:"form-control"},this.renderBoughtSpecialities()),e?p.createElement(yn.a,{addonType:"append"},this.renderButton("plus","default",this.startEdit)):"")}},{key:"renderEdit",value:function(){var e=this.props.specialities.map((function(e){return{id:e.name,name:e.name}}));return p.createElement(mn.a,null,p.createElement(qn,{allowNew:!0,labelKey:"name",onAdd:this.buySpeciality,options:e,tokens:this.props.bought}),p.createElement(yn.a,{addonType:"append"},this.renderButton("check","success",this.endEdit)))}},{key:"startEdit",value:function(){this.props.specialities.some((function(e){return e.canBuy}))&&this.setState({edit:!0})}},{key:"endEdit",value:function(){this.setState({edit:!1})}},{key:"isValueValid",value:function(e){return-1===this.props.bought.findIndex((function(t){return e===t}))}},{key:"buySpeciality",value:function(e){if(0!==e.length&&this.isValueValid(e)){var t=this.props.specialities.findIndex((function(t){return t.name===e}));if(-1!==t)this.props.specialities[t].canBuy&&this.props.onBuy(this.props.specialities[t].name,this.props.specialities[t].cost);else{var n=this.props.specialities.findIndex((function(e){return 0===e.name.length}));this.props.specialities[n].canBuy&&this.props.onBuy(e,this.props.specialities[n].cost)}}}}]),t}(p.PureComponent),Un=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement(Dn,{bought:this.props.bought,specialities:this.props.specialities,onBuy:this.props.onBuy})}}]),t}(p.PureComponent);var Rn=Object(l.b)((function(e,t){var n={canBuy:st(e,t.skill,""),cost:Ie(e),name:""},r=Ke[t.skill].concat(ct(e,t.skill).specialities),i=r.filter((function(e,t){return r.indexOf(e)===t})).sort(),a={bought:ct(e,t.skill).specialities,specialities:i.map((function(n){return{canBuy:st(e,t.skill,n),cost:Ie(e),name:n}}))};return a.specialities.push(n),a}),(function(e,t){return{onBuy:function(n,r){e(Dt(t.skill,n,r))}}}),(function(e,t){return Object.assign({},e,t)}))(Un),Wn=(n(124),function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("ul",{className:"skills-list"},Object.keys(Ke).map((function(e){return p.createElement("li",{key:e,className:"Grid"},p.createElement("div",{className:"Grid-cell"},p.createElement(Pn,{name:e})),p.createElement("div",{className:"Grid-cell"},p.createElement(Rn,{skill:e})))})))}}]),t}(p.PureComponent)),Ln=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,p.createElement(bn.a,{placeholder:"blabla"})),p.createElement(un,null,p.createElement(Wn,null)))}}]),t}(p.PureComponent),Mn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){for(var e=this.props.virtues.filter((function(e){return e.type===He})),t=this.props.virtues.filter((function(e){return e.type===_e})),n=Math.max(e.length,t.length),r=[p.createElement("div",{key:"header"},p.createElement("div",null,p.createElement(ln,{label:"Chivalrous Virtues"})),p.createElement("div",null,p.createElement(ln,{label:"Selfish Virtues"})))],i=0;i<n;i++){var a=i<e.length?p.createElement("div",null,this.renderVirtue(e[i])):p.createElement("div",null),o=i<t.length?p.createElement("div",null,this.renderVirtue(t[i])):p.createElement("div",null);r.push(p.createElement("div",{key:"virtues_"+i},a,o))}return p.createElement("div",null,r.map((function(e){return e})))}},{key:"renderVirtue",value:function(e){return p.createElement(An,{name:e.name,value:e.value,canBuy:e.canBuy&&e.cost.canPay,onBuy:e.onBuy})}}]),t}(p.PureComponent);var Hn=Object(l.b)((function(e){return{virtues:e.virtues.map((function(t){return{canBuy:Wt(e,t.name),cost:Fe(e,t.name,t.type),name:t.name,type:t.type,value:t.value}}))}}),(function(e){return{onBuy:function(t,n){return e(Ut(t,1,n))}}}),(function(e,t){var n={virtues:[]};return e.virtues.forEach((function(e){var r=Object.assign({},e,{onBuy:function(){return t.onBuy(e.name,e.cost)}});n.virtues.push(r)})),n}))(Mn),_n=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(Hn,null)))}}]),t}(p.PureComponent),Yn=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=this.props.name.charAt(0).toUpperCase()+this.props.name.slice(1);return p.createElement("div",{className:"Grid"},p.createElement("div",{className:"Grid-cell"},p.createElement(An,{name:e,value:this.props.value,canBuy:this.props.canBuy&&this.props.canBuy,onBuy:this.onBuy})),p.createElement("div",{className:"Grid-cell"},p.createElement(On,{header:"Cultivation",value:this.props.cultivation.toString()})))}},{key:"onBuy",value:function(){this.props.onBuy(this.props.cost)}}]),t}(p.PureComponent);var Kn=Object(l.b)((function(e,t){return{canBuy:!0,cost:Ne(e,t.name),cultivation:e.chi[t.name].cultivation,name:t.name,value:e.chi[t.name].value}}),(function(e,t){return{onBuy:function(n){return e(g(t.name,1,n))}}}),(function(e,t){return Object.assign({},e,t)}))(Yn),Gn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,Ue.map((function(e){return p.createElement("div",{key:e},p.createElement("div",null,p.createElement(Kn,{name:e})))})))}}]),t}(p.PureComponent),zn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Please select your Chi values"),p.createElement(un,null,p.createElement(Gn,null)))}}]),t}(p.PureComponent),Vn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement("div",null,"This is a placeholder "),p.createElement("div",null,"The content will soon be added"),p.createElement("div",null,p.createElement("div",null,this.props.children)))}}]),t}(p.PureComponent),Jn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(Vn,null,"Soon to be Equipment")))}}]),t}(p.PureComponent),Qn=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(Vn,null,"Soon to be Conditions")))}}]),t}(p.PureComponent),Xn=(n(125),function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).state={searched:n.props.options.map((function(e){return e.meta?e.id:e.label})),selected:n.props.preSelected?n.props.preSelected:[]},n.renderList=n.renderList.bind(Object(tn.a)(n)),n.renderSearchBox=n.renderSearchBox.bind(Object(tn.a)(n)),n.renderSelected=n.renderSelected.bind(Object(tn.a)(n)),n.itemOnSelectedToggle=n.itemOnSelectedToggle.bind(Object(tn.a)(n)),n.searchInputChanged=n.searchInputChanged.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("section",{className:"selector-list"},p.createElement("aside",{className:"left-list"},this.renderSearchBox(),this.renderList()),p.createElement("section",{className:"right-list"},this.renderSelected()))}},{key:"renderSearchBox",value:function(){return p.createElement("div",{className:"searchbox"},p.createElement("input",{type:"search",placeholder:"Search a style...",onChange:this.searchInputChanged}))}},{key:"renderList",value:function(){var e=this;return p.createElement("ul",{className:"search-list"},this.state.searched.filter((function(t){return void 0!==e.props.options.find((function(e){return e.id===t}))})).map((function(t){var n=e.props.options.find((function(e){return e.id===t}));if(n.disabled)return p.createElement("li",{className:"header",key:n.id},n.label);var r=-1!==e.state.selected.indexOf(n.id);return p.createElement("li",{className:"item",onClick:function(){return e.itemOnSelectedToggle(n)},key:n.id},r?p.createElement("b",null,n.label):n.label)})))}},{key:"renderSelected",value:function(){var e=this;return this.state.selected.map((function(t){var n=e.props.renderItem(t);return p.createElement("article",{className:"selected-item",key:t},n)}))}},{key:"itemOnSelectedToggle",value:function(e){var t=this;this.setState((function(n){var r=n.selected.indexOf(e.id),i=t.state.selected.slice();return r<0?i.splice(0,0,e.id):i.splice(r,1),i.sort((function(e,n){return t.props.options.findIndex((function(t){return t.id===e}))-t.props.options.findIndex((function(e){return e.id===n}))})),{selected:i}}))}},{key:"searchInputChanged",value:function(e){var t=e.target.value.toLowerCase();this.setState({searched:this.props.options.filter((function(e){return 0===t.length||(e.meta?-1!==e.meta.toLowerCase().search(t):-1!==e.label.toLowerCase().search(t))})).map((function(e){return e.id}))})}}]),t}(p.PureComponent));function Zn(e){switch(e.type){case se:return(e.increase>0?"+":"")+e.increase+" to "+e.statistic;case ue:return e.text.toString();case ce:return(e.chiIncrease>0?"+":"")+e.chiIncrease+" to Chi Threshold"}}var $n=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=Ce(ae,this.props.styleUid,this.props.uid);if(void 0!==e){var t=Zn(e.effect);return p.createElement("tr",{key:e.uid,role:"button",onClick:this.onBuy},p.createElement("td",null,e.name),p.createElement("td",null,e.cost),p.createElement("td",null,e.description,t.length>0?" "+t:null),p.createElement("td",null,this.renderButton()))}}},{key:"renderButton",value:function(){return this.props.canBuy&&this.props.cost.canPay?p.createElement("button",{color:"success"},p.createElement(nn.Icon,{name:"graduation-cap"})):p.createElement("button",{color:"danger"},p.createElement(nn.Icon,{name:"times"}))}},{key:"onBuy",value:function(){this.props.canBuy&&this.props.cost.canPay&&this.props.onBuy(this.props.cost)}}]),t}(p.PureComponent);var er=Object(l.b)((function(e,t){return{canBuy:At(e.kungfu,ae,t.styleUid,t.uid),cost:De(e,ae,t.styleUid,t.uid),known:Bt(e.kungfu,ae,t.styleUid,t.uid),styleUid:t.styleUid,uid:t.uid}}),(function(e,t){return{onBuy:function(n){return e(Ot(t.styleUid,t.uid,ae,n))}}}),(function(e,t){return Object.assign({},e,t)}))($n),tr=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).renderCrunch=n.renderCrunch.bind(Object(tn.a)(n)),n.renderStats=n.renderStats.bind(Object(tn.a)(n)),n.renderTechniques=n.renderTechniques.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=je(ae,this.props.uid);return p.createElement("div",null,p.createElement("div",null,p.createElement("div",null,this.renderCrunch(e))))}},{key:"renderCrunch",value:function(e){return p.createElement("div",null,p.createElement("div",{className:"Grid",style:{justifyContent:"space-between"}},p.createElement("h4",null,e.name),p.createElement("span",{style:{justifyContent:"flex-end"}},this.renderButton())),p.createElement("div",{className:"Grid"},p.createElement("h5",null,"Weapons"),p.createElement("p",null,e.weapons.map((function(e){return p.createElement("button",{key:e,disabled:!0},e)})))),p.createElement("div",{className:"Grid"},p.createElement("div",{className:"Grid-cell"},p.createElement("div",{className:"Grid"},p.createElement("h5",null,"Qualities"),e.qualities.map((function(e,t){return p.createElement("p",{key:t},e)}))),p.createElement("div",{className:"Grid"},p.createElement("h5",null,"Laught"),p.createElement("p",null,e.laugths)),p.createElement("div",{className:"Grid"},p.createElement("h5",null,"Fears"),p.createElement("p",null,e.fears))),p.createElement("div",{className:"Grid-cell",style:{flexGrow:0}},this.renderStats())),p.createElement("div",null,p.createElement("h5",null,"Techniques"),this.renderTechniques(e)))}},{key:"renderStats",value:function(){var e=this;return p.createElement("table",null,p.createElement("tbody",null,Object.keys(this.props.statistics).map((function(t){return p.createElement("tr",{key:t},p.createElement("td",null,t),p.createElement("td",null,e.props.statistics[t]))}))))}},{key:"renderTechniques",value:function(e){return p.createElement("table",null,p.createElement("thead",null,p.createElement("tr",null,p.createElement("th",null,"Name"),p.createElement("th",null,"Cost"),p.createElement("th",null,"Effect"),p.createElement("th",null))),p.createElement("tbody",null,e.techniques.map((function(t){return p.createElement(er,{key:t.uid,styleUid:e.uid,uid:t.uid})}))))}},{key:"renderButton",value:function(){var e=this;return this.props.canOpen&&this.props.cost.canPay?p.createElement("button",{color:"success",onClick:function(){return e.props.onOpen(e.props.cost)}},p.createElement(nn.Icon,{name:"graduation-cap"})):this.props.isOpen?p.createElement("button",{color:"primary",disabled:!0},p.createElement(nn.Icon,{name:"leanpub"})):p.createElement("button",{color:"danger"},p.createElement(nn.Icon,{name:"times"}))}}]),t}(p.PureComponent);var nr=Object(l.b)((function(e,t){var n=Tt(e.kungfu,ae,t.uid);return{canOpen:Nt(e.kungfu,ae,t.uid),cost:qe(e,ae,t.uid),isOpen:n,knownTechniques:n?e.kungfu[ae][t.uid]:[],statistics:It(e.kungfu,t.uid),uid:t.uid}}),(function(e,t){return{onOpen:function(n){return e(Et(t.uid,ae,n))}}}),(function(e,t){return Object.assign({},e,t)}))(tr),rr=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=Ce(oe,this.props.styleUid,this.props.uid);if(void 0!==e){var t=Zn(e.effect);return p.createElement("tr",{key:e.uid,role:"button",onClick:this.onBuy},p.createElement("td",null,e.name),p.createElement("td",null,e.level),p.createElement("td",null,e.description,t.length>0?" "+t:null),p.createElement("td",null,this.renderButton()))}}},{key:"renderButton",value:function(){return this.props.canBuy&&this.props.cost.canPay?p.createElement("button",{color:"success"},p.createElement(nn.Icon,{name:"graduation-cap"})):p.createElement("button",{color:"danger"},p.createElement(nn.Icon,{name:"times"}))}},{key:"onBuy",value:function(){this.props.canBuy&&this.props.cost.canPay&&this.props.onBuy(this.props.cost)}}]),t}(p.PureComponent);var ir=Object(l.b)((function(e,t){return{canBuy:At(e.kungfu,oe,t.styleUid,t.uid),cost:De(e,oe,t.styleUid,t.uid),known:Bt(e.kungfu,oe,t.styleUid,t.uid),styleUid:t.styleUid,uid:t.uid}}),(function(e,t){return{onBuy:function(n){return e(Ot(t.styleUid,t.uid,oe,n))}}}),(function(e,t){return Object.assign({},e,t)}))(rr),ar=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).renderTechniques=n.renderTechniques.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=je(oe,this.props.uid);return p.createElement("div",null,p.createElement("div",{className:"Grid",style:{justifyContent:"space-between"}},p.createElement("h4",null,e.name),p.createElement("span",{style:{justifyContent:"flex-end"}},this.renderButton())),p.createElement("div",null,p.createElement("h5",null,"Description"),p.createElement("p",null,e.description)),p.createElement("div",{className:"Grid"},p.createElement("h5",null,"Element"),p.createElement("p",null,p.createElement("button",{disabled:!0},e.element))),p.createElement("div",null,p.createElement("h5",null,"Techniques")),this.renderTechniques(e))}},{key:"renderTechniques",value:function(e){return p.createElement("table",null,p.createElement("thead",null,p.createElement("tr",null,p.createElement("th",null,"Name"),p.createElement("th",null,"Level"),p.createElement("th",null,"Effect"),p.createElement("th",null))),p.createElement("tbody",null,e.techniques.sort((function(e,t){return e.level-t.level})).map((function(t){return p.createElement(ir,{key:t.uid,styleUid:e.uid,uid:t.uid})}))))}},{key:"renderButton",value:function(){var e=this;return this.props.canOpen&&this.props.cost.canPay?p.createElement("button",{color:"success",onClick:function(){return e.props.onOpen(e.props.cost)}},p.createElement(nn.Icon,{name:"graduation-cap"})):this.props.isOpen?p.createElement("button",{color:"primary",disabled:!0},p.createElement(nn.Icon,{name:"leanpub"})):p.createElement("button",{color:"danger"},p.createElement(nn.Icon,{name:"times"}))}}]),t}(p.PureComponent);var or=Object(l.b)((function(e,t){var n=Tt(e.kungfu,oe,t.uid);return{canOpen:Nt(e.kungfu,oe,t.uid),cost:qe(e,oe,t.uid),isOpen:n,knownTechniques:n?e.kungfu[oe][t.uid]:[],uid:t.uid}}),(function(e,t){return{onOpen:function(n){return e(Et(t.uid,oe,n))}}}),(function(e,t){return Object.assign({},e,t)}))(ar),sr=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).renderItem=n.renderItem.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=ve.map((function(e){return{disabled:!1,id:e.uid,label:e.name,meta:e.name+",external"}})),t=ge.map((function(e){return{disabled:!1,id:e.uid,label:e.name,meta:e.name+",internal"}}));return p.createElement(Xn,{options:[{disabled:!0,id:"External Styles",label:"External Styles",meta:"external"}].concat(e).concat([{disabled:!0,id:"Internal Styles",label:"Internal Styles",meta:"internal"}]).concat(t),preSelected:[],renderItem:this.renderItem})}},{key:"renderItem",value:function(e){return function(e){var t=ve.findIndex((function(t){return t.uid===e})),n=ge.findIndex((function(t){return t.uid===e}));if(-1!==t)return ae;if(-1!==n)return oe;throw new Error("Unknwon kungfu "+e)}(e)===ae?p.createElement(nr,{uid:e}):p.createElement(or,{uid:e})}}]),t}(p.PureComponent),ur=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(sr,null)))}}]),t}(p.PureComponent),cr=n(197),lr=n(194),dr=n(195),hr=n(196),pr=n(100);n(179);function fr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var mr=function(e){function t(e){var n;Object(Vt.a)(this,t);var r={};return 1===(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).props.cost.length&&(r.cost=n.props.cost[0]),n.state=r,n.renderComplexCost=n.renderComplexCost.bind(Object(tn.a)(n)),n.renderPayload=n.renderPayload.bind(Object(tn.a)(n)),n.buyButtonClick=n.buyButtonClick.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=this,t=ie(this.props.lsUid,this.props.uid),n=this.renderPayload(t.payload),r=t.perks.map((function(t,n){return e.renderBonusChoices(t,n)})),i="number"===typeof t.cost?void 0:this.renderComplexCost();return p.createElement(cr.a,{isOpen:this.props.isOpen},p.createElement(lr.a,{toggle:this.props.toggle},t.type),p.createElement(dr.a,null,t.description,p.createElement("hr",null),[n,r,i]),p.createElement(hr.a,null,this.renderBuyButton()))}},{key:"renderBonusChoices",value:function(e,t){if(e.type===U){var n=function(e){console.log(e.target.value)};return p.createElement("div",{key:"bonus_"+t},Object.keys(e.bonuses).map((function(r){return p.createElement("div",{key:r},p.createElement("input",{type:"radio",key:"radio_bonus_"+t,name:"bonus_"+t,onChange:n}),function(e){switch(e.type){case P:return"destiny +"+e.value;case F:return"entanglement +"+e.value;case q:return e.chi+" chi +"+e.value;case D:return e.chi+" chi cultivation +"+e.value;case U:throw new Error("bonus too complicated to render : "+JSON.stringify(e));case R:return"skill "+e.skill+" +5";case W:return"skill "+e.skill+" : free speciality "+e.speciality;default:return"no"}}(e.bonuses[r]))})))}}},{key:"renderPayload",value:function(e){var t=this;if(e){return p.createElement(vn,{key:"payload",header:e,default:this.state.payload,validate:function(e){return e.length>0},onSubmit:function(e){t.setState({cost:t.state.cost,payload:e})}})}}},{key:"renderComplexCost",value:function(){var e=this,t={};return this.props.cost.forEach((function(e,n){var r=Object(Ct.a)({},n,{label:e.original.toString(),style:{color:e.canPay?"black":"light-grey"}});t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fr(n,!0).forEach((function(t){Object(Ct.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fr(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t,{},r)})),p.createElement("div",{key:"cost"},p.createElement(pr.a,{min:0,max:this.props.cost.length-1,marks:t,included:!1,onChange:function(t){e.setState({cost:e.props.cost[t],payload:e.state.payload})},step:null}),p.createElement("br",null))}},{key:"renderBuyButton",value:function(){var e=!!!ie(this.props.lsUid,this.props.uid).payload||this.state.payload&&this.state.payload.length>0,t=!!this.state.cost&&this.state.cost.canPay,n=e&&t;return p.createElement(fn.a,{disabled:!n,color:"info",onClick:this.buyButtonClick},"Pay")}},{key:"buyButtonClick",value:function(){this.state.cost&&this.state.cost.canPay&&(this.props.onBuy(this.state.cost,this.state.payload),this.props.toggle(),this.setState({}))}}]),t}(p.PureComponent),yr=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).state={isModalOpen:!1},n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n.renderKnown=n.renderKnown.bind(Object(tn.a)(n)),n.renderNotKnown=n.renderNotKnown.bind(Object(tn.a)(n)),n.onRowClickBuy=n.onRowClickBuy.bind(Object(tn.a)(n)),n.toggleModal=n.toggleModal.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){if(void 0!==ie(this.props.lsUid,this.props.uid))return this.props.known?this.renderKnown():this.renderNotKnown()}},{key:"renderButton",value:function(e){return e?p.createElement("button",{color:"success"},p.createElement(nn.Icon,{name:"graduation-cap"})):p.createElement("button",{color:"danger"},p.createElement(nn.Icon,{name:"times"}))}},{key:"fromCostToString",value:function(e){return"number"===typeof e?e:e.min+"-"+e.max}},{key:"renderDescription",value:function(e){var t=ie(this.props.lsUid,this.props.uid);return function(e){return te(e).type===I}(this.props.lsUid)?p.createElement("span",null,p.createElement("b",null,t.name+".")," "+e):p.createElement("span",null,e)}},{key:"renderKnown",value:function(){var e=this,t=ie(this.props.lsUid,this.props.uid);return this.props.payloads?this.props.payloads.map((function(n,r){return p.createElement("tr",{key:"known_"+t.uid+"_"+r},p.createElement("td",null,t.type),p.createElement("td",null,e.fromCostToString(t.cost)),p.createElement("td",null,e.renderDescription(n)),p.createElement("td",null))})):p.createElement("tr",{key:"known_"+t.uid},p.createElement("td",null,t.type),p.createElement("td",null,this.fromCostToString(t.cost)),p.createElement("td",null,this.renderDescription(t.description)),p.createElement("td",null))}},{key:"renderNotKnown",value:function(){var e=ie(this.props.lsUid,this.props.uid),t=this.props.canBuy&&this.props.cost.map((function(e){return e.canPay})).reduce((function(e,t){return e||t}),!1);return p.createElement("tr",{key:"unknown_"+e.uid,role:"button",onClick:this.onRowClickBuy},p.createElement(mr,{lsUid:this.props.lsUid,uid:this.props.uid,cost:this.props.cost,onBuy:this.props.onBuy,isOpen:this.state.isModalOpen,toggle:this.toggleModal}),p.createElement("td",null,e.type),p.createElement("td",null,this.fromCostToString(e.cost)),p.createElement("td",null,this.renderDescription(e.description)),p.createElement("td",null,this.renderButton(t)))}},{key:"onRowClickBuy",value:function(){this.props.canBuy&&this.props.cost.map((function(e){return e.canPay})).reduce((function(e,t){return e||t}),!1)&&!this.state.isModalOpen&&this.toggleModal()}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}}]),t}(p.PureComponent);var br=Object(l.b)((function(e,t){var n,r=e.loresheets[t.lsUid];if(r){var i=r.filter((function(e){return e.uid===t.uid}));if(i){var a=i.map((function(e){return void 0!==e.payload}));if(a.length>0)a.reduce((function(e,t){return e&&t}))&&(n=i.map((function(e){return e.payload})))}}return{canBuy:mt(e.loresheets,t.lsUid,t.uid),cost:Pe(e,t.lsUid,t.uid),known:dt(e.loresheets,t.lsUid,t.uid),lsUid:t.lsUid,payloads:n,uid:t.uid}}),(function(e,t){return{onBuy:function(n,r){return e(Ft(t.lsUid,t.uid,n,r))}}}),(function(e,t){return Object.assign({},e,t)}))(yr),vr=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).renderOptions=n.renderOptions.bind(Object(tn.a)(n)),n.renderButton=n.renderButton.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=te(this.props.uid);return p.createElement("div",null,p.createElement("div",{className:"Grid",style:{justifyContent:"space-between"}},p.createElement("h4",null,e.name),p.createElement("span",{style:{justifyContent:"flex-end"}},this.renderButton())),p.createElement("div",null,p.createElement("p",null,e.description)),p.createElement("div",null,this.renderOptions(e)))}},{key:"renderOptions",value:function(e){return e.options.length>0?p.createElement("table",null,p.createElement("thead",null,p.createElement("tr",null,p.createElement("th",null,"Type"),p.createElement("th",null,"Cost"),p.createElement("th",null,"Effect"),p.createElement("th",null))),p.createElement("tbody",null,e.options.map((function(t){return p.createElement(br,{key:t.uid,lsUid:e.uid,uid:t.uid})})))):p.createElement("div",null)}},{key:"renderButton",value:function(){var e=this;return this.props.canOpen&&this.props.cost.canPay?p.createElement("button",{color:"success",onClick:function(){return e.props.onOpen(e.props.cost)}},p.createElement(rn.a,{name:"graduation-cap"})):this.props.known?p.createElement("button",{color:"primary",disabled:!0},p.createElement(rn.a,{name:"leanpub"})):p.createElement("button",{color:"danger"},p.createElement(rn.a,{name:"times"}))}}]),t}(p.PureComponent);var gr=Object(l.b)((function(e,t){return{canOpen:ht(e,t.uid),cost:Ae(e,t.uid),known:lt(e.loresheets,t.uid),uid:t.uid}}),(function(e,t){return{onOpen:function(n){return e(Pt(t.uid,n))}}}),(function(e,t){return Object.assign({},e,t)}))(vr),Er=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).renderItem=n.renderItem.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e,t,n=(t=this.props.loresheetFilter,X.filter((function(e){return t(e)})).map((function(e){return e.category})).filter((function(e,t,n){return n.indexOf(e)===t}))).map((function(e){var t=[{id:e,label:e,disabled:!0}],n=Z((function(t){return t.category===e})).map((function(t){return{disabled:!1,id:t.uid,label:t.name,meta:t.name+","+e}}));return t.concat(n)})),r=(e=[]).concat.apply(e,Object(jt.a)(n));return p.createElement(Xn,{options:r,preSelected:[],renderItem:this.renderItem})}},{key:"renderItem",value:function(e){return p.createElement(gr,{uid:e})}}]),t}(p.PureComponent),Or=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(Er,{loresheetFilter:ne})))}}]),t}(p.PureComponent),kr=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(Er,{loresheetFilter:re})))}}]),t}(p.PureComponent),wr=function(e){function t(e){var n;return Object(Vt.a)(this,t),(n=Object(Qt.a)(this,Object(Xt.a)(t).call(this,e))).state={hoverIndex:n.props.history.length},n.renderHistoryAction.bind(Object(tn.a)(n)),n.rollbackHistory.bind(Object(tn.a)(n)),n}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){var e=this;return p.createElement("div",{className:"History"},p.createElement("div",null,this.props.history.map((function(t,n){return e.renderHistoryAction(t,n)}))))}},{key:"renderHistoryAction",value:function(e,t){var n=this;return p.createElement("div",{key:"rowHistory_"+t,onClick:function(){return n.rollbackHistory(t)}},p.createElement("div",null,t+1+" "+e.type),p.createElement("div",null,JSON.stringify(e)))}},{key:"rollbackHistory",value:function(e){this.props.onDelete(e)}}]),t}(p.PureComponent);var jr=Object(l.b)((function(e){return{history:e.history}}),(function(e){return{onDelete:function(t){e(b(t))}}}),(function(e,t){return Object.assign({},e,t)}))(wr),Cr=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement("div",null,p.createElement(sn,null,"Empty Intro"),p.createElement(un,null,p.createElement(jr,null)))}}]),t}(p.PureComponent),Sr=function(e){function t(){return Object(Vt.a)(this,t),Object(Qt.a)(this,Object(Xt.a)(t).apply(this,arguments))}return Object(Zt.a)(t,e),Object(Jt.a)(t,[{key:"render",value:function(){return p.createElement($t.a,null,p.createElement("div",{className:"lotwcs"},p.createElement(on,null),p.createElement(en.a,{exact:!0,path:"/",component:Nn}),p.createElement(en.a,{exact:!0,path:"/skills",component:Ln}),p.createElement(en.a,{exact:!0,path:"/chi",component:zn}),p.createElement(en.a,{exact:!0,path:"/virtues",component:_n}),p.createElement(en.a,{exact:!0,path:"/equipment",component:Jn}),p.createElement(en.a,{exact:!0,path:"/conditions",component:Qn}),p.createElement(en.a,{exact:!0,path:"/kungfu",component:ur}),p.createElement(en.a,{exact:!0,path:"/loresheets",component:Or}),p.createElement(en.a,{exact:!0,path:"/secretarts",component:kr}),p.createElement(en.a,{exact:!0,path:"/history",component:Cr})))}}]),t}(p.PureComponent),Tr=Object(d.createStore)(Mt,Kt(),Object(d.compose)(Object(d.applyMiddleware)((function(e){return function(t){return function(n){var r=t(n),i=e.getState(),a=i.automatics.map((function(e,t){var n;return function(e,t){switch(t.type){case z:return t.archetype===e.archetype;case G:return t.value>=ct(e,t.skill).value}return!1}(i,e)?(vt(i,e.perks.filter(tt)),(n=i.discounts).push.apply(n,Object(jt.a)(e.perks.filter(T))),t):-1})).filter((function(e){return e>=0}));return a.sort((function(e,t){return e<t?e:t})),a.forEach((function(e){i.automatics.splice(e,1)})),r}}})),Object(d.applyMiddleware)((function(e){return function(t){return function(n){var r=t(n);return n.type!==Object(y.getType)(b)&&e.getState().history.push(n),r}}})),Object(h.devToolsEnhancer)({})));f.render(p.createElement("div",null,p.createElement(l.a,{store:Tr},p.createElement(Sr,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("/LotWCS",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("/LotWCS","/service-worker.js");Gt?(!function(e,t){fetch(e).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):zt(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")}))):zt(t,e)}))}}()}},[[102,1,2]]]);
//# sourceMappingURL=main.dda32a35.chunk.js.map