(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{104:function(e,t,n){e.exports=n(190)},115:function(e,t,n){},116:function(e,t,n){},122:function(e,t,n){},123:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var r=n(11),i=n(46),a=n(96),o=n(0),s=n(16),u="INITIAL_STATE";var c="HEADER_SET_NAME",l="HEADER_SET_CONCEPT",d="HEADER_SET_ARCHETYPE",h="HEADER_SET_RANK",p=n(20),f="BONUS_DISCOUNT",m="BONUS_DESTINY",y="BONUS_ENTANGLEMENT",b="BONUS_CHI",v="BONUS_CULTIVATION",g="BONUS_ONE_AMONG_N",E="BONUS_SKILL_RANK",k="BONUS_SPECIALITY";function O(e){return{type:m,value:e}}function j(e,t){return{type:b,chi:t,value:e}}function w(e,t){return{skill:e,speciality:t,type:k}}var S="DISCOUNT_CHI",C="DISCOUNT_SKILL",I="DISCOUNT_LORESHEET",B="DISCOUNT_LORESHEET_OPTION",T={Awareness:{name:"Awareness",specialities:["Hear","See","Smell","Taste","Touch"]},Confidence:{name:"Confidence",specialities:["Appear steadfast","Focus on Breath (for Courtiers)","Recover from the Disorient Marvel","Resist Courtier\u2019s Arts"]},Crafting:{name:"Crafting",specialities:["Armor","Buildings","Cloth","Cooking","Gardening","Painting","Tools","Weapons"]},Finesse:{name:"Finesse",specialities:["Acrobatics","Cheating","Escaping Bonds","Picking Pockets","Sleight of Hand"]},Hardiness:{name:"Hardiness",specialities:["Disease","Focusing on Breath (for Warriors)","Poison","Recovering From Injuries","Staying Awake","Enduring Torture"]},Inspire:{name:"Inspire",specialities:["Debating","Intimidation","Outright Lies","Public Speeches","Specific Courtier\u2019s Arts techniques","Spinning the Facts"]},Learning:{name:"Learning",specialities:["Calligraphy","Focus on Breath (for Scholars)","History","Math","Other Cultures","Philosophy","Specific Scholar\u2019s Arts Techniques"]},Medicine:{name:"Medicine",specialities:["Disease","Focus on Breath (for Doctors)","Injuries","Poison","Pressure Points","Specific Doctor\u2019s Arts Techniques"]},Might:{name:"Might",specialities:["Breaking","Lifting","Pushing","Throwing"]},Perform:{name:"Perform",specialities:["Acting","Ceremonial Performances","Dancing","Poetry","Singing","Music"]},Politics:{name:"Politics",specialities:["Specific region or faction"]},Ride:{name:"Ride",specialities:["Caring for Your Horse","Coaxing Your Horse into Dangerous Terrain","Racing"]},Stealth:{name:"Stealth",specialities:["Camouflage","Deception","Eavesdropping","In Shadows","Silence","Smuggling"]},Survival:{name:"Survival",specialities:["At Sea","Cities","Deserts","Forests","Mountains","Prisons"]},Tactics:{name:"Tactics",specialities:["Battlefield Analysis","Disruption","Escorting Caravans","Sieging Fortresses","Specific Warrior\u2019s Arts Techniques"]},"Wu Wei":{name:"Wu Wei",specialities:["Focusing on Breath (for Priests)","Resisting Curses","Sensing Chi","Social Perception","Specific Priest\u2019s Arts Techniques"]}};function N(e,t){return t&&t.length>0?{skills:t,type:C,value:e}:{skills:Object.keys(T),type:C,value:e}}var P=[{description:"River size and Joss limit are 1, no Aura or Chi replenishment, Lake is 5, maximum skill bonus is +5.",key:"unranked",name:"Unranked",perks:[O(10),N(10),j(8,"general")],value:0},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 1. Lake size is 6. Maximum skill bonus is +5.",key:"5th_rank",name:"5th Rank",perks:[O(15),N(10),j(8,"general")],value:1},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 2. Lake size is 7. Maximum skill bonus is +10.",key:"4th_rank",name:"4th Rank",perks:[O(20),N(20),j(10,"general")],value:2},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 3. Lake size is 8. Maximum skill bonus is +15.",key:"3rd_rank",name:"3rd Rank",perks:[O(50),N(20),j(10,"general")],value:3},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 4. Lake size is 9. Maximum skill bonus is +20.",key:"2nd_rank",name:"2nd Rank",perks:[O(100),N(20),j(10,"general")],value:4},{description:"River size, Joss, Chi replenishment and Chi Aura limit are 5. Lake size is 10. Maximum skill bonus is +25.",key:"1st_rank",name:"1st Rank",perks:[O(150),N(20),j(10,"general")],value:5}];var x=["general","wood","fire","earth","water","metal","enlightened","corrupt"];function U(){var e={};return x.forEach(function(t){e[t]={value:0,cultivation:0}}),e}function A(e,t,n){e[t].value+=n}function R(e){return e.rank?Math.max(5,5*e.rank.value):5}function L(){var e={};return Object.keys(T).forEach(function(t){Object.defineProperty(e,t,{value:{name:t,specialities:[],value:0},writable:!0})}),e}function _(e,t,n){if(e[t].value+5>n)throw new Error("Skill "+t+" overflow");e[t].value+=5}function H(e,t,n){return-1!==e[t].specialities.findIndex(function(e){return e===n})}function D(e,t,n){if(H(e,t,n))throw new Error('Something went wrong, speciality "'+n+'" for skill "'+t+'" already bought');e[t].specialities.push(n)}function F(e,t){return!(e.skills[t].value+5>R(e))}function W(e,t,n){return!H(e.skills,t,n)}function M(e){switch(e.type){case m:case y:case b:case v:case g:case E:case k:return!0;case f:default:return!1}}function q(e){switch(e.type){case S:case C:case I:case B:return!0;default:return!1}}function K(e,t){var n=e.discounts.map(function(e,n){return t(e)?n:NaN}).filter(function(e){return!isNaN(e)});return n||[]}function Y(e,t){var n,r,i=P.findIndex(function(e){return e.key===t});e.rank={name:t,value:P[i].value},n=e,r=P[i].perks.filter(function(e){return M(e)}),Object(p.a)(n,function(e){r.filter(function(e){return M(e)}).forEach(function(t){switch(t.type){case m:e.destiny+=t.value;break;case y:e.entanglement+=t.value;break;case b:A(e.chi,t.chi,t.value);break;case v:!function(e,t,n){for(var r=e[t].cultivation+n,i=e[t].value;r>=i;)r-=++i;e[t].value=i,e[t].cultivation=r}(e.chi,t.chi,t.value);break;case E:var n=R(e);_(e.skills,t.skill,n);break;case k:D(e.skills,t.skill,t.speciality);break;default:return}})}),function(e,t){t.filter(function(e){return q(e)}).forEach(function(t){e.discounts.push(t)})}(e,P[i].perks.filter(function(e){return q(e)}))}var V="CHI_BUY",G=[{uid:"jianghu",name:"The Jiang Hu",category:"Rivers and Lakes",cost:0,ruleset:"core",description:"Within Shen Zhou, there is a parallel world of outsiders and outcasts. Some are born into this world, others are forced into it, and many more choose to live in it to escape the boundaries and limitations imposed on them by regular society. The heroes and rogues within this world are abjured by the common people as threats to an orderly life, but for many they represent a hope of escape, or advancement, from a life controlled by tradition.",options:[{uid:"familiarity",cost:2,type:"Bonus",description:"You know how to navigate the Rivers and Lakes outside the Wulin organizations, in other Jiang Hu communities like the criminal underground, the ferrymen guilds, or the pleasure trade. Pick one such group; you get a +5 bonus to social rolls where familiarity with that subculture matters.",repeatable:!0,prerequisites:[],perks:[],payload:"an organization"},{uid:"knunderground",cost:{min:2,max:10},type:"Fortune",description:"Once per session, upon arriving in a new location, you may declare to have basic knowledge of the local Jiang Hu underground, including important organizations and who\u2019s in charge. This includes Wulin factions.",repeatable:!0,prerequisites:[],perks:[]},{uid:"statusunderground",cost:{min:1,max:5},description:"You are already known within one or more of the aforementioned organizations, and have some Status with them.",type:"Status",repeatable:!0,prerequisites:[{type:"OR",prerequisites:["familiarity","knunderground"]}],perks:[],payload:"an organization"}]},{uid:"tigersanddragons",name:"Crouching Tigers and Hidden Dragons",category:"Rivers and Lakes",cost:1,ruleset:"core",description:"The saying goes, \u201cThe Jiang Hu is full of Crouching Tigers and Hidden Dragons\u201d. So many in the martial community have every reason to hide their true face, and their true power. Who knows who might prove to be a powerful fighter in seclusion?",options:[{uid:"hiddenid",cost:{min:0,max:5},type:"Disadvantage",description:"You are hiding your true identity behind a disguise. Are you a noble passing as a beggar? Are you masquerading as someone of the opposite gender? Do you pretend to be a member of a certain organization while in reality serving another? Once a session, whenever the veil of your disguise seems to be pierced and protecting your fake identity gets you in trouble, earn 1 additional Destiny. If this is your first or second disadvantage you can get it for free, otherwise it costs 5 Destiny.",repeatable:!1,prerequisites:[],perks:[],payload:"an hidden identity"},{uid:"stabbingguesttechnique",cost:3,description:"Following in the traditions of the Cike of the past, you learn or develop the Stabbing Guest Technique. This helps you when you seek to gain the trust of someone that you seek to hurt, damage, or destroy! As long as you have this stated purpose and make sure to describe your actions as fitting with your devious plans, you get a +5 Action Bonus to all appropriate social rolls to gain their trust, appear friendly and harmless, and enter into their confidence. This bonus is lost if you stop harboring bad intentions.",type:"Secret",repeatable:!1,prerequisites:[],perks:[]},{uid:"sensechi",cost:3,description:"Get the Wu Wei Specialty: Sense Chi or the Stealth Specialty: Hide Killer Intent for free",type:"Bonus",repeatable:!1,prerequisites:[],perks:[function(e){if(0===Object.keys(e).length)throw new Error("Can not create one out of zero");return 1===Object.keys(e).length?Object.values(e)[0]:{type:g,bonuses:e}}({sensechi:w("Wu Wei","Sense Chi"),hidekillerintent:w("Wu Wei","Hide Killer Intent")})]}]},{uid:"wulin",name:"The Wulin",category:"Rivers and Lakes",cost:0,ruleset:"core",description:"The Wulin is considered a greater family for those who dedicate their lives to the martial arts, regardless of their origins and goals, for only a warrior can truly understand another warrior, even if they stand on opposite sides of the battlefield. It is said that Heaven has a place assigned for everyone. The path of Kung Fu is for those who reject this idea, who believe that fate is in their hands, and that their fortunes are forged by the strength of their spirit and the fire of their passion.",options:[{uid:"tieswithanother",cost:{min:1,max:10},type:"Involvement",description:"The World of Martial Arts is full of heroes. Some heroes become teachers, friends closer than brothers, lovers, or soul mates, while others become sworn rivals or hated enemies. Spend destiny to tie your fate to that of any other character that may appeal to you. In order to declare an existing relationship between the two of you, make a current action (such as defeating them in battle or showing up to assist them), or make sure that you will develop such a relationship shortly. As usual, refer to Introduction to Loresheets for costs.",repeatable:!0,prerequisites:[],perks:[],payload:"a hero"},{uid:"historicalfact",cost:{min:3,max:15},type:"Fortune",description:"The history of the Wulin is shrouded in the mists of legends and myths, but you manage to shine a light on one particular facet! Introduce a historical fact of your own design that pertains to your current situation and which gives you an advantage of some sort, such as an alternative solution to a problem. This might concern a person, an organization, or even the Wulin as a whole. Needless to say, the Sage is the final arbitrator of cost.",repeatable:!0,prerequisites:[],perks:[],payload:"an historical fact"}]},{uid:"wulinsage",name:"The Wulin Sage",category:"Rivers and Lakes",cost:0,ruleset:"core",description:"Legends speak of a mythical figure that oversees the Wulin on behalf of Heaven. The Sage records all of the history and affairs of the martial world; he decides who is worthy of advancement and reports to the Celestial Order on the advancement and deeds of Chivalrous heroes, and to the Hellish Courts on those of the selfish. He sees that those who seek greater challenges reap greater glory and attain higher power.",options:[{uid:"fact",cost:{min:5,max:15},type:"Fortune",description:"With Sage approval, you may introduce a fact about the truth behind the Wulin Sage that would influence the current story.",repeatable:!0,prerequisites:[],perks:[],payload:"a fact"},{uid:"tieswithsage",cost:{min:5,max:10},type:"Involvement",description:"Your destiny will be tied to the figure of the Wulin Sage.",repeatable:!1,prerequisites:[],perks:[]},{uid:"tiensnpcwithsage",cost:{min:3,max:10},type:"Involvement",description:"The Destiny of an NPC of your choice will be or is tied to the figure of the Wulin Sage.",repeatable:!0,prerequisites:[],perks:[],payload:"a NPC"}]}],z=G.map(function(e){return e.category}).filter(function(e,t,n){return n.indexOf(e)===t});function J(e){if(!G.find(function(t){return t.uid===e}))throw new Error('Invalid loresheet "'+e+'"')}function Q(e,t){J(e);var n=G.findIndex(function(t){return t.uid===e});if(!G[n].options.find(function(e){return e.uid===t}))throw new Error('Invalid loresheet option " + uid + "')}function X(e){var t=G.findIndex(function(t){return t.uid===e});return G[t]}function Z(e,t){var n=G.findIndex(function(t){return t.uid===e}),r=G[n].options.findIndex(function(e){return e.uid===t});return G[n].options[r]}var $="KUNGFU_EXTERNAL",ee="KUNGFU_INTERNAL",te="EFFECT_COMBAT_STATISTIC",ne="EFFECT_CONDITIONAL_TEXT",re="EFFECT_CHI_THRESHOLD_INCREASE_BASE_CHI";function ie(e,t){return{increase:t,statistic:e,type:te}}function ae(e){var t=e.filter(function(e){return e.length>0});if(0===t.length)throw new Error("Error with conditionalText : empty text");return{text:t,type:ne}}function oe(e){return ae(new Array(e))}var se,ue={name:"Blossom Harvest",uid:"Blossom Harvest",qualities:["This is one of the most honest and straightforward fighting styles there is. It dispenses with trickery or fancy moves, and compensates with sweat and resilience. Its training methods use everyday items and situations, such as running upstream through a river to build stamina, and using farming tools to practice weapon forms. Most of its techniques and theories also incorporate metaphors that are easy for common people to understand.","Because it is so approachable, it has achieved a folk hero status; peasant rebellions often start training with this fighting style, calling those who stand against injustice \u201cBlossoming Heroes\u201d."],weapons:["Massive","Staff","Unarmed"],laugths:"A chain is only as strong as its weakest link, and so Blossom Harvest laughs at styles that are overly complicated or full of flourishes. These intricate methods are easily smashed aside and broken. It likewise laughs at such trivialities as being outnumbered, or disadvantageous terrain \u2013 pure grit and hellish training have rendered Blossoming Heroes fearless to such things!",fears:"This style has problems when facing fighters who are reactive. Blossom Harvest\u2019s openness is easy to read and predict, giving such opponents everything they need. It\u2019s also ill-prepared for enemies who wield supernatural forces or influence.",statistics:{speed:5,footwork:0,strike:5,damage:10,block:5,toughness:10},techniques:[{name:"Heart-Fire Temper Skill",cost:4,description:"Pain and fear blunt edges worse than rust, but your training has seen every bone broken and regrown stronger. To you, pain is but a reminder of your lessons and your teacher\u2019s wisdom.",effect:oe("When you have a physical wound condition, this style\u2019s Damage bonus increases to +15."),uid:"Heart-Fire Temper Skill"},{name:"Iron Skin",cost:5,description:"Hardened muscles and willpower have given you great resistance to physical punishment. Spears bend and sticks break upon striking you!",effect:ie("toughness",5),uid:"Iron Skin"},{name:"Iron Skin",uid:"Iron Skin 2",cost:4,description:"Hardened muscles and willpower have given you great resistance to physical punishment. Spears bend and sticks break upon striking you!",effect:(se=2,{chiIncrease:se,type:re}),prerequisites:[{uid:"iron_skin_1"}]},{name:"Nine Mountains Great Strength",uid:"Nine Mountains Great Strength",cost:5,description:"Your attacks are like mountains: grand and overwhelming, undeniable and unmovable.",effect:ie("strike",5)},{name:"No Vermin in the World",uid:"No Vermin in the World",cost:2,description:"The corrupt are numerous and the virtuous seem but few these days. Villages are razed to the ground and orphans cry in the streets. The great men of this age therefore have no choice but to be Blossoming Heroes, fighting off entire gangs all by themselves!",effect:oe("All your attacks count as Area attacks for the purpose of damaging groups of Minions.")}]},ce={name:"Bone-Fed Wolf Fang",uid:"Bone-Fed Wolf Fang",weapons:["Massive","Saber"],qualities:["Generations of battlefield experience have shaped a fighting style developed with the practicalities of warfare in mind. Some maneuvers were loosely inspired by the gruesome methods by which wolves drag down their prey. It is mainly taught by the military, but unfortunately, many deserters take up a life of banditry, making this style a common plague for simple people. Because of this, the style is also often called a dog\u2019s way of fighting.","This style focuses on hard, linear movements designed to cripple and exploit weaknesses\u2013the supreme soldier needs efficiency, not beauty. It cruelly maims first, and dispatches second. No methods are too dishonest when victory is on the line."],laugths:"The wolf laughs at honesty, which it rewards with hungry teeth. Above all else, the wolf knows no greater joy than to fight someone vulnerable or caught off guard.",fears:"The wolf fears what is hidden or unorthodox, for his many strategies don\u2019t account for them. The wolf also dislikes being outnumbered and surrounded; it relies on being the hunting pack, not the hunted.",statistics:{speed:5,footwork:5,strike:5,damage:10,block:5,toughness:5},techniques:[{name:"Circling Pack",cost:4,description:"Wolves strike from all sides to overwhelm their prey. You force a response with your weapon, creating an opening so you can deal a blow to a vulnerable spot.",effect:oe("The difficulty to recover from Disrupt or Disorient Marvels you have imposed is increased by 10."),uid:"Circling Pack"},{name:"Fighting With Fire",cost:4,description:"Fire is a useful, if dangerous, tool to use in war. Its effects on the enemy are startling: set something ablaze that they value and they will flock towards it; set something ablaze that they can afford to lose and they won\u2019t dare approach. So too must your strikes be utilized to force them into a pattern and method of your choosing. An enemy that follows your lead is not worthy of the name",effect:oe("This style\u2019s Block and Dodge bonuses increase to +10 against any Disoriented or Disrupted target"),uid:"Fighting With Fire"},{name:"March Towards Hell",cost:4,description:"The wise general makes his enemies tire themselves out by forcing them to march towards his position. Once in battle, he cleverly uses his troops to dictate the maneuvers of his enemy. Your attacks follow the same philosophy; your enemies are already defeated, the slaughter a mere formality.",effect:oe("You may Flood 1 die from the River while you make an attack. If you do, the strike also creates a Disorient or Disrupt condition if it hits."),uid:"March Towards Hell"},{name:"Rainfall at Night",cost:4,description:"The battlefield is where wars are ended, but to a peerless general their outcome is determined beforehand. Assassinate their officers, poison the wells, fill their hearts with propaganda, and creep inside their camps to set fires and steal horses. These are the ways of the warrior who knows neither honor nor defeat.",effect:oe("This style\u2019s Strike bonus increases to +10 against any Disoriented or Disrupted target."),uid:"Rainfall at Night"},{name:"Wolves Devour the Lion",cost:4,description:"Stress bruised ribs until they crack. Lash sore flesh until it rips. The tales of glorious battle are for the halls of gold and silk, but they are built on your acts in the fields of iron and wolves.",effect:oe("This style\u2019s Damage bonus increases to +15 against any Disoriented or Disrupted target."),uid:"Wolves Devour the Lion"}]},le={name:"Boundless Prosperity Manual",uid:"Boundless Prosperity Manual",description:"One of the most famous instructions on health is the Boundless Prosperity Manual. It teaches proper breathing and exercise, and brings long life and vigorous health. Some rare copies go much further! They can teach you how to transcend mortal limitations through internal alchemy. Those who carefully decipher the clues and study the methods await a transformation to a higher state of being! These rare copies are all jealously guarded by gangs and martial masters.",element:"wood",techniques:[{level:1,name:"Retain Balanced Nature",uid:"Retain Balanced Nature",description:"You promote the circulation of breath throughout your system by clearing away pollutants and obstructions.",effect:oe("You have a +5 bonus to a roll made to remove a Disoriented or Disrupted Marvel, provided the Marvel is described as being caused by pain, blocked pressure points, injuries, or similar effects. You can also make such checks using only a single die, instead of needing a set.")},{level:2,name:"Act Without Resistance",uid:"Act Without Resistance",description:"One of the many techniques of physical augmentation, the manual teaches you how to achieve a forcefulness in your movements that sweeps away opposing powers.",effect:oe("You have a +10 bonus to Damage.")},{level:2,name:"Be Where You Must",uid:"Be Where You Must",description:"The key to increased physical potency isn't just greater power, but knowing when to show restraint. Precision can cut away unnecessary motion and purify your movement.",effect:ae(["Round-long duration.","You have a +10 bonus to Footwork."])},{level:2,name:"Move According To Purpose",uid:"Move According To Purpose",description:"Many act without being truly aware of what they are doing. You cast aside such sleepwalking and go through life with certainty and flawlessness.",effect:oe("You have a +10 bonus to Strike.")},{level:2,name:"Understand What You See",uid:"Understand What You See",description:"Hone your mind to clarity. All phenomena and occurrences will become obvious!",effect:oe("You have a +10 bonus to Speed.")},{level:3,name:"Covering Weakness with Strength",uid:"Covering Weakness with Strength",description:"Many people in need of the Manual are sick, crippled or scarred. It can\u2019t restore what is truly lost, but it can help overcome the troubles these unfortunate conditions bring.",effect:ae(["Round-long duration. You may spend one Chi per round to extend the technique\u2019s duration another round; you must spend the Chi at the beginning of each new round.","Treat your Injury Conditions as if they were one step less severe when determining the Action or Breath penalty they inflict.","This doesn\u2019t cure or reduce the conditions, only their effects."])},{level:3,name:"Fortifying Oneself against the World",uid:"Fortifying Oneself against the World",description:"The world is filled with harmful maladies that can damage your organs. The manual teaches methods which bolster the body against such dangers.",effect:ae(["Round-long duration.","You have a +10 bonus to your Hardiness and to Chi Aura when resisting Rippling rolls caused by the Doctor\u2019s Arts."])},{level:3,name:"Reflexes Like Lightning",uid:"Reflexes Like Lightning",description:"Life is tenacious and adaptive. If you can fully attain these qualities, then you can truly be a master of yourself and of others.",effect:oe("You have a +10 bonus to any Marvel or attempt to break a Wave.")},{level:4,name:"Five Elements Supreme Combination",uid:"Five Elements Supreme Combination",description:"You can use internal alchemy to directly enhance the workings of your body.",effect:ae(["Round-long duration.","You have a +15 bonus to your Speed, Footwork, Strike, Damage, Block, or Toughness.","You may boost this technique, adding the bonus to another statistic for every two Chi you spend."])},{level:4,name:"King of Heaven Shapes the Earth",uid:"King of Heaven Shapes the Earth",description:"You are struck by a fatal blow, yet miraculously you are alive! You direct blood away from the open wound, dull the pain with your will, and even rearrange your internal organs to keep them away from the injury. Only someone with absolute control over their own body could perform this feat.",effect:oe("When someone makes a Rippling roll against you to cause an Injury or Medical Condition, reduce the number of dice in the roll by two. You may boost this technique to remove one more die per two Chi spent. You can\u2019t reduce the number of dice below one.")},{level:5,name:"God-Body Transcendence",uid:"God-Body Transcendence",description:"The final technique of the Manual is not taught, but understood. The accumulation of physical and spiritual health has created an immortal divine body that will endure after death on a higher level of existence. It is exhausting to do so, but you can briefly bring forth this higher nature.",effect:ae(["Round-long duration. You may spend Chi each round to extend the technique\u2019s duration another round; you must spend the Chi at the beginning of each new round. The first extension costs 1 chi, the second costs 2 chi, the third costs 3 chi, and so on.","Increase your Lake size by 1."])}]},de=[ue,ce],he=[le];function pe(e){switch(e){case $:case ee:return;default:throw new Error('Invalid kung fu type : "'+e+'"')}}function fe(e,t){if(pe(e),e===$){if(de.filter(function(e){return e.uid===t}).length<1)throw new Error('Invalid external kungfu "'+t+'"')}else if(he.filter(function(e){return e.uid===t}).length<1)throw new Error('Invalid internal kungfu "'+t+'"')}function me(e,t,n){if(fe(e,t),e===$){if(de.filter(function(e){return e.uid===t&&e.techniques.filter(function(e){return e.uid===n}).length>0}).length<1)throw new Error('Invalid external kungfu technique "'+n+'" for style "'+t+'"')}else if(he.filter(function(e){return e.uid===t&&e.techniques.filter(function(e){return e.uid===n}).length>0}).length<1)throw new Error('Invalid internal kungfu technique "'+n+'" for style "'+t+'"')}function ye(e,t){if(e===$){var n=de.findIndex(function(e){return e.uid===t});return de[n]}var r=he.findIndex(function(e){return e.uid===t});return he[r]}function be(e,t,n){if(e===$){var r=de.findIndex(function(e){return e.uid===t}),i=de[r].techniques.findIndex(function(e){return e.uid===n});return de[r].techniques[i]}var a=he.findIndex(function(e){return e.uid===t}),o=he[a].techniques.findIndex(function(e){return e.uid===n});return he[a].techniques[o]}var ve={canPay:!0,destiny:0,original:0};function ge(e,t,n){if(n){var r=t,i=n.map(function(t){var n=e.discounts[t],i=Math.min(r,n.value),a=n.value-i;return r-=i,{idx:t,newValue:a}});return{canPay:e.destiny>=r,destiny:r,discounts:i,original:t}}return{canPay:e.destiny>=t,destiny:t,original:t}}function Ee(e,t){if(!t.canPay)throw new Error("Unpayable cost");if(e.destiny-=t.destiny,e.destiny<0)throw new Error("Negative destiny reached");!function(e,t){t.discounts&&t.discounts.forEach(function(t){e.discounts[t.idx].value=t.newValue,0===t.newValue&&e.discounts.splice(t.idx,1)})}(e,t)}function ke(e,t){return ge(e,2,K(e,function(e){return e.type===C&&(0===e.skills.length||-1!==e.skills.findIndex(function(e){return e===t}))}))}function Oe(e){return ge(e,2,[])}function je(e,t){var n=e.chi[t].value,r="general"===t?1:"corrupt"===t||"enlightened"===t?10:5,i=n<1?r:r*n;return ge(e,Math.max(0,i-e.chi[t].cultivation),K(e,function(e){return e.type===S&&(0===e.chis.length||-1!==e.chis.findIndex(function(e){return e===t}))}))}function we(e,t){return ge(e,X(t).cost,K(e,function(e){return e.type===I&&(0===e.uids.length||-1!==e.uids.findIndex(function(e){return e===t}))}))}function Se(e,t,n,r){return ge(e,r,K(e,function(e){return e.type===B&&(0===e.uids.length||-1!==e.uids.findIndex(function(e){return e.lsUid===t&&-1!==e.optUid.findIndex(function(e){return n===e})}))}))}function Ce(e,t,n){var r=Z(t,n).cost;if("number"===typeof r)return[Se(e,t,n,r)];var i=r.max-r.min+1;return Array.from(new Array(i).keys()).map(function(e){return r.min+e}).map(function(r){return Se(e,t,n,r)})}function Ie(e){return ge(e,5)}function Be(e){return ge(e,10)}function Te(e,t,n,r){var i=be(t,n,r);return ge(e,t===$?i.cost:i.level)}var Ne="KUNGFU_OPEN_STYLE",Pe="KUNGFU_CUSTOM_NAME_FOR_STYLE",xe="KUNGFU_CUSTOM_NAME_FOR_TECHNIQUE",Ue="KUNGFU_BUY_TECHNIQUE",Ae=n(57),Re=n(54);function Le(e,t,n){return-1!==Object.keys(e[t]).findIndex(function(e){return e===n})}function _e(e,t,n,r){return!!Le(e,t,n)&&-1!==e[t][n].findIndex(function(e){return e===r})}function He(e,t){var n=ye($,t).statistics;if(!Le(e,$,t))return n;var r=Object(Re.a)({},n);return e[$][t].forEach(function(e){var n=be($,t,e);switch(n.effect.type){case te:r[n.effect.statistic]+=n.effect.increase}}),r}function De(e,t,n){return!Le(e.kungfu,t,n)}function Fe(e,t,n,r){if(!Le(e.kungfu,t,n))return!1;if(_e(e.kungfu,t,n,r))return!1;if(t===$)return!0;if(e.kungfu.noRestrictionInternal&&-1!==e.kungfu.noRestrictionInternal.findIndex(function(e){return e===n}))return!0;var i=function(e,t){return Le(e.kungfu,ee,t)?e.kungfu[ee][t].map(function(e){return be(ee,t,e).level}).sort():[]}(e,n),a=be(ee,n,r);return 0===i.length&&1===a.level||Math.max.apply(Math,Object(Ae.a)(i))===a.level-1}function We(e,t){switch(t.type){case Ne:return Object(p.b)(e,function(e){var n,r,i;Ee(e,t.cost),n=e.kungfu,r=t.kungfuType,i=t.uid,fe(r,i),n[r][i]=[],e.history.push(t)});case Ue:return Object(p.b)(e,function(e){Ee(e,t.cost),function(e,t,n,r){if(fe(t,n),me(t,n,r),!Le(e,t,n))throw new Error("Internal error : style not open");if(_e(e,t,n,r))throw new Error("Internal error : technique already presents");e[t][n].push(r)}(e.kungfu,t.kungfuType,t.styleUid,t.uid),e.history.push(t)})}return e}var Me="HISTORY_DELETE";var qe="SKILLS_BUY",Ke="SKILLS_SPECIALITY_BUY";var Ye="LORESHEET_OPEN",Ve="LORESHEET_BUY_OPTION";function Ge(e,t){return-1!==Object.keys(e).findIndex(function(e){return e===t})}function ze(e,t,n){return void 0!==e[t]&&-1!==e[t].findIndex(function(e){return e.uid===n})}function Je(e,t){return!Ge(e.loresheets,t)}function Qe(e,t){return e||t}function Xe(e,t){return e&&t}function Ze(e,t,n){if(!Ge(e,t))return!1;var r=Z(t,n);return ze(e,t,n)&&r.repeatable?r.repeatable:r.prerequisites.map(function(n){return function(e,t,n){return"string"===typeof n?ze(e,t,n):n.prerequisites.map(function(n){return ze(e,t,n)}).reduce("OR"===n.type?Qe:Xe,"OR"!==n.type)}(e,t,n)}).reduce(Xe,!0)}function $e(e,t){switch(t.type){case Ye:return Object(p.a)(e,function(e){var n,r;Ee(e,t.cost),n=e.loresheets,J(r=t.uid),n[r]=[],e.history.push(t)});case Ve:return Object(p.a)(e,function(e){Ee(e,t.cost),function(e,t,n,r){if(J(t),Q(t,n),!Ze(e,t,n))throw new Error("Internal error : impossible to buy loresheet option "+t+","+n);e[t].push({uid:n,payload:r})}(e.loresheets,t.lsUid,t.uid,t.payload),e.history.push(t)})}return e}var et="VIRTUE_INCREASE",tt=[{name:"Honor",type:"VIRTUE_CHIVALROUS"},{name:"Benevolence",type:"VIRTUE_CHIVALROUS"},{name:"Righteousness",type:"VIRTUE_CHIVALROUS"},{name:"Loyalty",type:"VIRTUE_CHIVALROUS"},{name:"Force",type:"VIRTUE_CHIVALROUS"},{name:"Revenge",type:"VIRTUE_SELFISH"},{name:"Individualism",type:"VIRTUE_SELFISH"},{name:"Obsession",type:"VIRTUE_SELFISH"},{name:"Ruthlessness",type:"VIRTUE_SELFISH"},{name:"Ferocity",type:"VIRTUE_SELFISH"}];function nt(e,t){return-1!==e.findIndex(function(e){return t===e.name})}function rt(e,t){var n=e.virtues.findIndex(function(e){return t===e.name});return-1!==n&&!(e.virtues[n].value+1>5)}function it(e,t){switch(t.type){case et:return Object(p.a)(e,function(e){Ee(e,t.cost),function(e,t,n){if(!nt(e,t))throw new Error("Internal Error : unknwon new virtue "+t);e.forEach(function(e){e.name===t&&(e.value+=n)})}(e.virtues,t.name,t.value),e.history.push(t)})}return e}function at(e,t){if(!e)return ht();switch(t.type){case d:case l:case c:case h:return function(e,t){switch(t.type){case c:return Object(p.b)(e,function(e){e.name=t.name,e.history.push(t)});case l:return Object(p.b)(e,function(e){e.concept=t.concept,e.history.push(t)});case h:return Object(p.b)(e,function(e){Y(e,t.rank),e.history.push(t)});case d:return Object(p.b)(e,function(e){e.archetype=t.archetype,e.history.push(t)})}return e}(e,t);case V:return function(e,t){switch(t.type){case V:return Object(p.b)(e,function(e){Ee(e,t.cost),A(e.chi,t.chi,t.value),e.history.push(t)})}return e}(e,t);case u:return ht();case Ne:case Pe:case xe:case Ue:return We(e,t);case qe:case Ke:return function(e,t){switch(t.type){case qe:return Object(p.a)(e,function(e){Ee(e,t.cost);var n=R(e);_(e.skills,t.name,n),e.history.push(t)});case Ke:return Object(p.a)(e,function(e){Ee(e,t.cost),D(e.skills,t.skill,t.speciality),e.history.push(t)})}return e}(e,t);case Ye:case Ve:return $e(e,t);case Me:return function(e,t){switch(t.type){case Me:return ot(e,e.history.slice(0,t.id+1));default:return e}}(e,t);case et:return it(e,t);default:return e}}function ot(e,t){var n=!0,r=!1,i=void 0;try{for(var a,o=t[Symbol.iterator]();!(n=(a=o.next()).done);n=!0){e=at(e,a.value)}}catch(s){r=!0,i=s}finally{try{n||null==o.return||o.return()}finally{if(r)throw i}}return e}var st=[{breath:"Hardiness",description:"Warriors are by far the most common of the five archetypes. Although all people within the martial arts society are good at fighting, it is the warriors who truly embrace it as their way of life. They are the swordsmen and pugilists, constables and assassins, as well as the most iconic heroes and villains.",key:"warrior",name:"Warrior"},{breath:"WuWei",description:"Despite the name, they are not simple religious administrators; they are the Daoists, wise men and women whose approach to fighting starts with Chi cultivation first and foremost. In a world where inner power is of utmost importance, priests are widely respected.",key:"priest",name:"Priest"},{breath:"Confidence",description:"Courtiers wield power not just over themselves but also over others. They are the rulers, merchants, envoys and entertainers that shape society and its people. In a subtle way they are the most powerful of all people; a general may win a war but it\u2019s his king who decides whether there is war at all.",key:"courtier",name:"Courtier"},{breath:"Learning",description:"Scholars are the educated masters, the lore keepers, inventors and advisors. With their knowledge about the workings of the world they perceive events like few others do. Scholars are often found debating how best to rule an empire, hunting for long-lost manuals written in Sanskrit or studying things from exotic foreign lands.",key:"scholar",name:"Scholar"},{breath:"Medicine",description:"Doctors are the least prominent of all five archetypes. Although the medical profession is by no means unheard of, relatively few of them involve themselves in the martial arts realm. Those that do have the potential to become greatly respected allies and feared enemies, literally masters over life and death.",key:"doctor",name:"Doctor"}];function ut(e){return function(e){if(!st.find(function(t){return t.key===e}))throw new Error('Invalid archetype "'+e+'"')}(e),{archetype:e,type:d}}function ct(e){return function(e){if(!P.find(function(t){return t.key===e}))throw new Error('Invalid rank "'+e+'"')}(e),{rank:e,type:h}}function lt(e,t,n){if(0===t.length)throw new Error("Empty speciality");return{cost:n,skill:e,speciality:t,type:Ke}}function dt(){return{archetype:void 0,concept:void 0,name:void 0,rank:void 0,destiny:0,entanglement:0,history:[{type:u}],chi:U(),kungfu:{KUNGFU_EXTERNAL:{},KUNGFU_INTERNAL:{}},loresheets:{},skills:L(),virtues:tt.map(function(e){return{name:e.name,value:0,type:e.type}}),bonuses:[],discounts:[]}}function ht(){return dt()}var pt=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ft(e,t){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See http://bit.ly/CRA-PWA."),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}}).catch(function(e){console.error("Error during service worker registration:",e)})}n(114),n(115),n(116);var mt=n(2),yt=n(6),bt=n(4),vt=n(3),gt=n(5),Et=n(200),kt=n(199),Ot=n(7),jt=n(12),wt=n.n(jt),St=n(191),Ct=(n(122),function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).toggle=n.toggle.bind(Object(Ot.a)(n)),n.state={isOpen:!1},n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"toggle",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"render",value:function(){return o.createElement("nav",{className:"navbar"},o.createElement("ul",{className:"left"},o.createElement(St.a,{to:"/"},o.createElement("li",null,o.createElement("h1",null,"LotWCS"))),o.createElement(St.a,{to:"/skills"},o.createElement("li",null,"Skills")),o.createElement(St.a,{to:"/chi"},o.createElement("li",null,"Chi")),o.createElement(St.a,{to:"/virtues"},o.createElement("li",null,"Virtues")),o.createElement(St.a,{to:"/equipment"},o.createElement("li",null,"Equipment")),o.createElement(St.a,{to:"/conditions"},o.createElement("li",null,"Conditions")),o.createElement(St.a,{to:"/kungfu"},o.createElement("li",null,"Kung\xa0Fu")),o.createElement(St.a,{to:"/loresheets"},o.createElement("li",null,"Loresheets")),o.createElement(St.a,{to:"/history"},o.createElement("li",null,"History"))),o.createElement("ul",{className:"right"},o.createElement(St.a,{to:"/print"},o.createElement("li",null,"Full sheet")),o.createElement(St.a,{to:"/config"},o.createElement("li",null,o.createElement(wt.a,{name:"cog"})))))}}]),t}(o.PureComponent)),It=(n(123),function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("section",{className:"app-intro"},this.props.children)}}]),t}(o.PureComponent)),Bt=(n(124),function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("section",{className:"app-page"},this.props.children)}}]),t}(o.PureComponent)),Tt={display:"block",textAlign:"center"},Nt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("h4",{style:Tt},o.createElement("span",{className:"align-text-middle"},this.props.label))}}]),t}(o.PureComponent),Pt=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).state={dropdownOpen:!1,edit:!1,value:n.props.default?n.props.default:""},n.startEdit=n.startEdit.bind(Object(Ot.a)(n)),n.endEdit=n.endEdit.bind(Object(Ot.a)(n)),n.toggleDDL=n.toggleDDL.bind(Object(Ot.a)(n)),n.select=n.select.bind(Object(Ot.a)(n)),n.getLabelForSelectedKey=n.getLabelForSelectedKey.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n.renderDropdownList=n.renderDropdownList.bind(Object(Ot.a)(n)),n.renderDropdownItems=n.renderDropdownItems.bind(Object(Ot.a)(n)),n.renderHeader=n.renderHeader.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,null,[{key:"getDerivedStateFromProps",value:function(e,t){return t.edit||(t.value=e.default?e.default:""),t}}]),Object(yt.a)(t,[{key:"render",value:function(){return this.state.edit?this.renderDropdownList():this.renderValue()}},{key:"startEdit",value:function(){this.props.locked||this.setState({edit:!0,dropdownOpen:!1})}},{key:"endEdit",value:function(){this.setState({edit:!1,dropdownOpen:!1});var e=this.getLabelForSelectedKey();this.state.value!==this.props.default&&e.length>0&&this.props.onSubmit(this.state.value)}},{key:"toggleDDL",value:function(){this.setState({dropdownOpen:!this.state.dropdownOpen})}},{key:"select",value:function(e){this.setState({value:e})}},{key:"getLabelForSelectedKey",value:function(){var e=this;return this.props.values.map(function(t){var n=t.key,r=t.label;return n===e.state.value?r:""}).filter(function(e){return""!==e}).join(", ")}},{key:"renderHeader",value:function(){return o.createElement(Nt,{label:this.props.header})}},{key:"renderButton",value:function(e){var t=o.createElement("button",{onClick:this.endEdit,color:"success"},o.createElement(wt.a,{name:"check"})),n=o.createElement("button",{onClick:this.endEdit,color:"danger"},o.createElement(wt.a,{name:"times"}));return e.length>0?t:n}},{key:"renderDropdownItems",value:function(){var e=this;return this.props.values.map(function(t){var n=t.key,r=t.label;return o.createElement("div",{key:n,onClick:function(){return e.select(n)}},r)})}},{key:"renderDropdownList",value:function(){var e=this.getLabelForSelectedKey();return o.createElement("div",null,o.createElement("div",null,this.renderHeader()),o.createElement("div",null,o.createElement("div",null,o.createElement("div",null,e.length>0?e:"Choose a "+this.props.header),o.createElement("div",null,this.renderDropdownItems())),this.renderButton(e)))}},{key:"renderValue",value:function(){var e=this.getLabelForSelectedKey();return o.createElement("div",{onClick:this.startEdit,role:"button"},o.createElement("div",null,this.renderHeader()),o.createElement("div",null,e.length>0?e:this.state.value))}}]),t}(o.PureComponent),xt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Pt,{header:"Character Archetype",default:this.props.value,values:st.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}).map(function(e){return{key:e.key,label:e.name}}),onSubmit:this.props.onChange,locked:this.props.locked})}}]),t}(o.PureComponent);var Ut=Object(r.b)(function(e){return{locked:void 0!==e.archetype,value:void 0!==e.archetype?e.archetype:""}},function(e){return{onChange:function(t){return e(ut(t))}}},function(e,t){return Object.assign({},e,t)})(xt),At=n(192),Rt=n(193),Lt=n(201),_t=n(194),Ht=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).state={edit:!1,value:n.props.default?n.props.default:""},n.componentWillReceiveProps=n.componentWillReceiveProps.bind(Object(Ot.a)(n)),n.startEdit=n.startEdit.bind(Object(Ot.a)(n)),n.endEdit=n.endEdit.bind(Object(Ot.a)(n)),n.textChange=n.textChange.bind(Object(Ot.a)(n)),n.renderEdit=n.renderEdit.bind(Object(Ot.a)(n)),n.renderNoEdit=n.renderNoEdit.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return this.state.edit?this.renderEdit():this.renderNoEdit()}},{key:"componentWillReceiveProps",value:function(e){this.setState({value:e.default?e.default:""})}},{key:"startEdit",value:function(){this.props.locked||this.setState({edit:!0})}},{key:"endEdit",value:function(){this.setState({edit:!1,value:this.state.value.trim()}),this.props.validate(this.state.value)&&this.state.value!==this.props.default&&this.props.onSubmit(this.state.value)}},{key:"textChange",value:function(e){this.setState({value:e.target.value})}},{key:"renderButton",value:function(e){var t=o.createElement(At.a,{onClick:this.endEdit,color:"success"},o.createElement(wt.a,{name:"check"})),n=o.createElement(At.a,{onClick:this.endEdit,color:"danger"},o.createElement(wt.a,{name:"times"}));return e?t:n}},{key:"renderNoEdit",value:function(){return o.createElement("div",{onClick:this.startEdit,role:"button"},o.createElement(Rt.a,null,o.createElement(Lt.a,{addonType:"prepend"},this.props.header),o.createElement("div",{className:"form-control"},this.state.value)))}},{key:"renderEdit",value:function(){var e=this.props.validate(this.state.value);return o.createElement("div",null,o.createElement(Rt.a,null,o.createElement(Lt.a,{addonType:"prepend"},this.props.header),o.createElement(_t.a,{onChange:this.textChange,value:this.state.value,placeholder:this.state.value,valid:e}),o.createElement(Lt.a,{addonType:"append"},this.renderButton(e))))}}]),t}(o.PureComponent),Dt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Ht,{header:"Character Concept",default:this.props.value,validate:this.isStringNotNull,onSubmit:this.props.onChange})}},{key:"isStringNotNull",value:function(e){return e.trim().length>0}}]),t}(o.PureComponent);var Ft=Object(r.b)(function(e){return{value:void 0!==e.concept?e.concept:""}},function(e){return{onChange:function(t){return e({type:l,concept:t})}}},function(e,t){return Object.assign({},e,t)})(Dt),Wt=function(e){function t(){var e,n;Object(mt.a)(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return(n=Object(bt.a)(this,(e=Object(vt.a)(t)).call.apply(e,[this].concat(i)))).render=function(){return o.createElement(Rt.a,null,o.createElement(Lt.a,{addonType:"prepend"},n.props.header),o.createElement("div",{className:"form-control"},n.props.value))},n}return Object(gt.a)(t,e),t}(o.PureComponent),Mt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Wt,{header:"Destiny",value:this.props.value.toString()})}}]),t}(o.PureComponent);var qt=Object(r.b)(function(e){return{value:e.destiny}})(Mt),Kt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Wt,{header:"Entanglement",value:this.props.value.toString()})}}]),t}(o.PureComponent);var Yt=Object(r.b)(function(e){return{value:e.entanglement}})(Kt),Vt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Ht,{header:"Character Name",default:this.props.value,validate:this.isStringNotNull,onSubmit:this.props.onChange})}},{key:"isStringNotNull",value:function(e){return e.trim().length>0}}]),t}(o.PureComponent);var Gt=Object(r.b)(function(e){return{value:void 0!==e.name?e.name:""}},function(e){return{onChange:function(t){return e({type:c,name:t})}}},function(e,t){return Object.assign({},e,t)})(Vt),zt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Pt,{header:"Character Rank",default:this.props.rank?this.props.rank.name:"",values:P.map(function(e){return{label:e.name,key:e.key}}),onSubmit:this.props.onChange,locked:this.props.locked})}}]),t}(o.PureComponent);var Jt=Object(r.b)(function(e){return{locked:void 0!==e.archetype,rank:e.rank}},function(e){return{onChange:function(t){return e(ct(t))}}},function(e,t){return Object.assign({},e,t)})(zt),Qt=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Empty Intro"),o.createElement(Bt,null,o.createElement(Gt,null),o.createElement(Ft,null),o.createElement(Ut,null),o.createElement(Jt,null),o.createElement(qt,null),o.createElement(Yt,null)))}}]),t}(o.PureComponent),Xt=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).state={edit:!1},n.startEdit=n.startEdit.bind(Object(Ot.a)(n)),n.endEdit=n.endEdit.bind(Object(Ot.a)(n)),n.doBuy=n.doBuy.bind(Object(Ot.a)(n)),n.renderHeader=n.renderHeader.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return this.state.edit?o.createElement(Rt.a,null,o.createElement(Lt.a,{addonType:"prepend"},this.props.name),o.createElement("div",{className:"form-control"},this.props.value),o.createElement(Lt.a,{addonType:"append"},this.props.canBuy?this.renderButton("plus",this.doBuy):null,this.renderButton("times",this.endEdit))):o.createElement(Rt.a,{onClick:this.startEdit,role:"button"},o.createElement(Lt.a,{addonType:"prepend"},this.props.name),o.createElement("div",{className:"form-control"},this.props.value))}},{key:"componentDidUpdate",value:function(){this.state.edit&&!this.props.canBuy&&this.endEdit()}},{key:"startEdit",value:function(){this.props.canBuy&&this.setState({edit:!0})}},{key:"endEdit",value:function(){this.setState({edit:!1})}},{key:"doBuy",value:function(){this.props.onBuy()}},{key:"renderHeader",value:function(){return o.createElement(Nt,{label:this.props.name})}},{key:"renderButton",value:function(e,t){return o.createElement(At.a,{onClick:t},o.createElement(wt.a,{name:e}))}}]),t}(o.PureComponent),Zt=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Xt,{name:this.props.name,value:this.props.value,canBuy:this.props.canBuy&&this.props.cost.canPay,onBuy:this.onBuy})}},{key:"onBuy",value:function(){this.props.onBuy(this.props.cost)}}]),t}(o.PureComponent);var $t=Object(r.b)(function(e,t){return{canBuy:F(e,t.name),cost:ke(e,t.name),name:t.name,value:e.skills[t.name].value}},function(e,t){return{onBuy:function(n){e(function(e,t){return{cost:t,name:e,type:qe}}(t.name,n))}}},function(e,t){return Object.assign({},e,t)})(Zt),en=(n(125),function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).idKey=void 0,n.labelKey=void 0,n.labelKey=n.props.labelKey?n.props.labelKey:t.defaultProps.labelKey,n.idKey=n.props.idKey?n.props.idKey:t.defaultProps.idKey,n.state={focused:!1,input:""},n.inputChange=n.inputChange.bind(Object(Ot.a)(n)),n.onBlur=n.onBlur.bind(Object(Ot.a)(n)),n.onFocus=n.onFocus.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",{className:"form-control"},o.createElement("div",{className:"TokenInput"},o.createElement("div",{className:"TokenInput-token-list"},this.renderTokens()),o.createElement("div",{className:"TokenInput-dropdown"},o.createElement("input",{className:"TokenInput-input",onBlur:this.onBlur,onChange:this.inputChange,onFocus:this.onFocus,value:this.state.input}),o.createElement("div",{className:"TokenInput-dropdown-content"},this.renderSuggestion(),this.renderAddNew()))))}},{key:"renderTokens",value:function(){return this.props.tokens.map(function(e){return o.createElement("span",{key:e,className:"TokenInput-token"},e)})}},{key:"renderSuggestion",value:function(){var e=this;return this.matchOptionsWithInput(!1).filter(function(t){return t[e.labelKey].length>0}).filter(function(t){var n=t[e.labelKey],r=t[e.idKey];return!(!n||!r)}).map(function(t){var n=t[e.labelKey],r=t[e.idKey];return o.createElement("span",{key:r,onMouseDown:function(){e.props.onAdd(r),e.resetState()}},n)})}},{key:"renderAddNew",value:function(){var e=this;if(this.state.focused&&this.props.allowNew&&this.state.input.length>0&&0===this.matchOptionsWithInput(!0).length){return o.createElement("span",{id:"addNew",onMouseDown:function(){e.props.onAdd(e.state.input),e.resetState()}},"Add a new entry : ",this.state.input)}}},{key:"onFocus",value:function(){this.setState({focused:!0})}},{key:"onBlur",value:function(){}},{key:"inputChange",value:function(e){this.setState({input:e.target.value.trim()})}},{key:"resetState",value:function(){this.setState({input:""})}},{key:"matchOptionsWithInput",value:function(e){var t=this;if(!this.state.focused)return[];var n=this.state.input.toLowerCase().trim();return this.props.options.filter(function(e){return!t.props.tokens||!t.props.tokens.some(function(n){return n===e[t.labelKey]})}).filter(function(r){var i=r[t.labelKey];if(!i)return!1;var a=i.toLowerCase().trim();return!e&&t.state.input.length>0?-1!==a.indexOf(n):!e||n===a})}}]),t}(o.PureComponent));en.defaultProps={idKey:"id",labelKey:"name"};var tn=en,nn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).state={edit:!1},n.startEdit=n.startEdit.bind(Object(Ot.a)(n)),n.endEdit=n.endEdit.bind(Object(Ot.a)(n)),n.isValueValid=n.isValueValid.bind(Object(Ot.a)(n)),n.buySpeciality=n.buySpeciality.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n.renderBoughtSpecialities=n.renderBoughtSpecialities.bind(Object(Ot.a)(n)),n.renderNoEdit=n.renderNoEdit.bind(Object(Ot.a)(n)),n.renderEdit=n.renderEdit.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return this.state.edit?this.renderEdit():this.renderNoEdit()}},{key:"renderButton",value:function(e,t,n){return o.createElement(At.a,{onClick:n,color:t},o.createElement(wt.a,{name:e}))}},{key:"renderBoughtSpecialities",value:function(){return this.props.bought.map(function(e,t){return(t>0?", ":"")+e})}},{key:"renderNoEdit",value:function(){var e=this.props.specialities.some(function(e){return e.canBuy&&e.cost.canPay});return o.createElement(Rt.a,{onClick:this.startEdit,role:"button"},o.createElement("div",{className:"form-control"},this.renderBoughtSpecialities()),e?o.createElement(Lt.a,{addonType:"append"},this.renderButton("plus","default",this.startEdit)):"")}},{key:"renderEdit",value:function(){var e=this.props.specialities.map(function(e){return{id:e.name,name:e.name}});return o.createElement(Rt.a,null,o.createElement(tn,{allowNew:!0,labelKey:"name",onAdd:this.buySpeciality,options:e,tokens:this.props.bought}),o.createElement(Lt.a,{addonType:"append"},this.renderButton("check","success",this.endEdit)))}},{key:"startEdit",value:function(){this.props.specialities.some(function(e){return e.canBuy})&&this.setState({edit:!0})}},{key:"endEdit",value:function(){this.setState({edit:!1})}},{key:"isValueValid",value:function(e){return-1===this.props.bought.findIndex(function(t){return e===t})}},{key:"buySpeciality",value:function(e){if(0!==e.length&&this.isValueValid(e)){var t=this.props.specialities.findIndex(function(t){return t.name===e});if(-1!==t)this.props.specialities[t].canBuy&&this.props.onBuy(this.props.specialities[t].name,this.props.specialities[t].cost);else{var n=this.props.specialities.findIndex(function(e){return 0===e.name.length});this.props.specialities[n].canBuy&&this.props.onBuy(e,this.props.specialities[n].cost)}}}}]),t}(o.PureComponent),rn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(nn,{bought:this.props.bought,specialities:this.props.specialities,onBuy:this.props.onBuy})}}]),t}(o.PureComponent);var an=Object(r.b)(function(e,t){var n={canBuy:W(e,t.skill,""),cost:Oe(e),name:""},r=T[t.skill].specialities.concat(e.skills[t.skill].specialities),i=r.filter(function(e,t){return r.indexOf(e)===t}).sort(),a={bought:e.skills[t.skill].specialities,specialities:i.map(function(n){return{canBuy:W(e,t.skill,n),cost:Oe(e),name:n}})};return a.specialities.push(n),a},function(e,t){return{onBuy:function(n,r){e(lt(t.skill,n,r))}}},function(e,t){return Object.assign({},e,t)})(rn),on=(n(126),function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("ul",{className:"skills-list"},Object.keys(T).map(function(e){return o.createElement("li",{key:e,className:"Grid"},o.createElement("div",{className:"Grid-cell"},o.createElement($t,{name:e})),o.createElement("div",{className:"Grid-cell"},o.createElement(an,{skill:e})))}))}}]),t}(o.PureComponent)),sn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,o.createElement(_t.a,{placeholder:"blabla"})),o.createElement(Bt,null,o.createElement(on,null)))}}]),t}(o.PureComponent);var un=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){for(var e=this.props.virtues.filter(function(e){return"VIRTUE_CHIVALROUS"===e.type}),t=this.props.virtues.filter(function(e){return"VIRTUE_SELFISH"===e.type}),n=Math.max(e.length,t.length),r=[o.createElement("div",{key:"header"},o.createElement("div",null,o.createElement(Nt,{label:"Chivalrous Virtues"})),o.createElement("div",null,o.createElement(Nt,{label:"Selfish Virtues"})))],i=0;i<n;i++){var a=i<e.length?o.createElement("div",null,this.renderVirtue(e[i])):o.createElement("div",null),s=i<t.length?o.createElement("div",null,this.renderVirtue(t[i])):o.createElement("div",null);r.push(o.createElement("div",{key:"virtues_"+i},a,s))}return o.createElement("div",null,r.map(function(e){return e}))}},{key:"renderVirtue",value:function(e){return o.createElement(Xt,{name:e.name,value:e.value,canBuy:e.canBuy&&e.cost.canPay,onBuy:e.onBuy})}}]),t}(o.PureComponent);var cn=Object(r.b)(function(e){return{virtues:e.virtues.map(function(t){return{canBuy:rt(e,t.name),cost:Ie(e),name:t.name,type:t.type,value:t.value}})}},function(e){return{onBuy:function(t,n){return e(function(e,t,n){return{type:et,name:e,value:t,cost:n}}(t,1,n))}}},function(e,t){var n={virtues:[]};return e.virtues.forEach(function(e){var r=Object.assign({},e,{onBuy:function(){return t.onBuy(e.name,e.cost)}});n.virtues.push(r)}),n})(un),ln=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Empty Intro"),o.createElement(Bt,null,o.createElement(cn,null)))}}]),t}(o.PureComponent);var dn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=this.props.name.charAt(0).toUpperCase()+this.props.name.slice(1);return o.createElement("div",{className:"Grid"},o.createElement("div",{className:"Grid-cell"},o.createElement(Xt,{name:e,value:this.props.value,canBuy:this.props.canBuy&&this.props.canBuy,onBuy:this.onBuy})),o.createElement("div",{className:"Grid-cell"},o.createElement(Wt,{header:"Cultivation",value:this.props.cultivation.toString()})))}},{key:"onBuy",value:function(){this.props.onBuy(this.props.cost)}}]),t}(o.PureComponent);var hn=Object(r.b)(function(e,t){return{canBuy:!0,cost:je(e,t.name),cultivation:e.chi[t.name].cultivation,name:t.name,value:e.chi[t.name].value}},function(e,t){return{onBuy:function(n){return e(function(e,t,n){return{chi:e,cost:n,type:V,value:t}}(t.name,1,n))}}},function(e,t){return Object.assign({},e,t)})(dn),pn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,x.map(function(e){return o.createElement("div",{key:e},o.createElement("div",null,o.createElement(hn,{name:e})))}))}}]),t}(o.PureComponent),fn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Please select your Chi values"),o.createElement(Bt,null,o.createElement(pn,null)))}}]),t}(o.PureComponent),mn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement("div",null,"This is a placeholder "),o.createElement("div",null,"The content will soon be added"),o.createElement("div",null,o.createElement("div",null,this.props.children)))}}]),t}(o.PureComponent),yn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Empty Intro"),o.createElement(Bt,null,o.createElement(mn,null,"Soon to be Equipment")))}}]),t}(o.PureComponent),bn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Empty Intro"),o.createElement(Bt,null,o.createElement(mn,null,"Soon to be Conditions")))}}]),t}(o.PureComponent),vn=(n(127),function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).state={searched:n.props.options.map(function(e){return e.meta?e.id:e.label}),selected:n.props.preSelected?n.props.preSelected:[]},n.renderList=n.renderList.bind(Object(Ot.a)(n)),n.renderSearchBox=n.renderSearchBox.bind(Object(Ot.a)(n)),n.renderSelected=n.renderSelected.bind(Object(Ot.a)(n)),n.itemOnSelectedToggle=n.itemOnSelectedToggle.bind(Object(Ot.a)(n)),n.searchInputChanged=n.searchInputChanged.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("section",{className:"selector-list"},o.createElement("aside",{className:"left-list"},this.renderSearchBox(),this.renderList()),o.createElement("section",{className:"right-list"},this.renderSelected()))}},{key:"renderSearchBox",value:function(){return o.createElement("div",{className:"searchbox"},o.createElement("input",{type:"search",placeholder:"Search a style...",onChange:this.searchInputChanged}))}},{key:"renderList",value:function(){var e=this;return o.createElement("ul",{className:"search-list"},this.state.searched.filter(function(t){return void 0!==e.props.options.find(function(e){return e.id===t})}).map(function(t){var n=e.props.options.find(function(e){return e.id===t});if(n.disabled)return o.createElement("li",{className:"header",key:n.id},n.label);var r=-1!==e.state.selected.indexOf(n.id);return o.createElement("li",{className:"item",onClick:function(){return e.itemOnSelectedToggle(n)},key:n.id},r?o.createElement("b",null,n.label):n.label)}))}},{key:"renderSelected",value:function(){var e=this;return this.state.selected.map(function(t){var n=e.props.renderItem(t);return o.createElement("article",{className:"selected-item",key:t},n)})}},{key:"itemOnSelectedToggle",value:function(e){var t=this;this.setState(function(n){var r=n.selected.indexOf(e.id),i=t.state.selected.slice();return r<0?i.splice(0,0,e.id):i.splice(r,1),i.sort(function(e,n){return t.props.options.findIndex(function(t){return t.id===e})-t.props.options.findIndex(function(e){return e.id===n})}),{selected:i}})}},{key:"searchInputChanged",value:function(e){var t=e.target.value.toLowerCase();this.setState({searched:this.props.options.filter(function(e){return 0===t.length||(e.meta?-1!==e.meta.toLowerCase().search(t):-1!==e.label.toLowerCase().search(t))}).map(function(e){return e.id})})}}]),t}(o.PureComponent));function gn(e,t,n){return pe(t),fe(t,e),{type:Ne,cost:n,uid:e,kungfuType:t}}function En(e,t,n,r){return pe(n),fe(n,e),me(n,e,t),{cost:r,kungfuType:n,styleUid:e,type:Ue,uid:t}}function kn(e){switch(e.type){case te:return(e.increase>0?"+":"")+e.increase+" to "+e.statistic;case ne:return e.text.toString();case re:return(e.chiIncrease>0?"+":"")+e.chiIncrease+" to Chi Threshold"}}var On=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=be($,this.props.styleUid,this.props.uid);if(void 0!==e){var t=kn(e.effect);return o.createElement("tr",{key:e.uid,role:"button",onClick:this.onBuy},o.createElement("td",null,e.name),o.createElement("td",null,e.cost),o.createElement("td",null,e.description,t.length>0?" "+t:null),o.createElement("td",null,this.renderButton()))}}},{key:"renderButton",value:function(){return this.props.canBuy&&this.props.cost.canPay?o.createElement("button",{color:"success"},o.createElement(jt.Icon,{name:"graduation-cap"})):o.createElement("button",{color:"danger"},o.createElement(jt.Icon,{name:"times"}))}},{key:"onBuy",value:function(){this.props.canBuy&&this.props.cost.canPay&&this.props.onBuy(this.props.cost)}}]),t}(o.PureComponent);var jn=Object(r.b)(function(e,t){return{canBuy:Fe(e,$,t.styleUid,t.uid),cost:Te(e,$,t.styleUid,t.uid),known:_e(e.kungfu,$,t.styleUid,t.uid),styleUid:t.styleUid,uid:t.uid}},function(e,t){return{onBuy:function(n){return e(En(t.styleUid,t.uid,$,n))}}},function(e,t){return Object.assign({},e,t)})(On),wn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).renderCrunch=n.renderCrunch.bind(Object(Ot.a)(n)),n.renderStats=n.renderStats.bind(Object(Ot.a)(n)),n.renderTechniques=n.renderTechniques.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=ye($,this.props.uid);return o.createElement("div",null,o.createElement("div",null,o.createElement("div",null,this.renderCrunch(e))))}},{key:"renderCrunch",value:function(e){return o.createElement("div",null,o.createElement("div",{className:"Grid",style:{justifyContent:"space-between"}},o.createElement("h4",null,e.name),o.createElement("span",{style:{justifyContent:"flex-end"}},this.renderButton())),o.createElement("div",{className:"Grid"},o.createElement("h5",null,"Weapons"),o.createElement("p",null,e.weapons.map(function(e){return o.createElement("button",{key:e,disabled:!0},e)}))),o.createElement("div",{className:"Grid"},o.createElement("div",{className:"Grid-cell"},o.createElement("div",{className:"Grid"},o.createElement("h5",null,"Qualities"),e.qualities.map(function(e,t){return o.createElement("p",{key:t},e)})),o.createElement("div",{className:"Grid"},o.createElement("h5",null,"Laught"),o.createElement("p",null,e.laugths)),o.createElement("div",{className:"Grid"},o.createElement("h5",null,"Fears"),o.createElement("p",null,e.fears))),o.createElement("div",{className:"Grid-cell",style:{flexGrow:0}},this.renderStats())),o.createElement("div",null,o.createElement("h5",null,"Techniques"),this.renderTechniques(e)))}},{key:"renderStats",value:function(){var e=this;return o.createElement("table",null,o.createElement("tbody",null,Object.keys(this.props.statistics).map(function(t){return o.createElement("tr",{key:t},o.createElement("td",null,t),o.createElement("td",null,e.props.statistics[t]))})))}},{key:"renderTechniques",value:function(e){return o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Name"),o.createElement("th",null,"Cost"),o.createElement("th",null,"Effect"),o.createElement("th",null))),o.createElement("tbody",null,e.techniques.map(function(t){return o.createElement(jn,{key:t.uid,styleUid:e.uid,uid:t.uid})})))}},{key:"renderButton",value:function(){var e=this;return this.props.canOpen&&this.props.cost.canPay?o.createElement("button",{color:"success",onClick:function(){return e.props.onOpen(e.props.cost)}},o.createElement(jt.Icon,{name:"graduation-cap"})):this.props.isOpen?o.createElement("button",{color:"primary",disabled:!0},o.createElement(jt.Icon,{name:"leanpub"})):o.createElement("button",{color:"danger"},o.createElement(jt.Icon,{name:"times"}))}}]),t}(o.PureComponent);var Sn=Object(r.b)(function(e,t){var n=Le(e.kungfu,$,t.uid);return{canOpen:De(e,$,t.uid),cost:Be(e),isOpen:n,knownTechniques:n?e.kungfu[$][t.uid]:[],statistics:He(e.kungfu,t.uid),uid:t.uid}},function(e,t){return{onOpen:function(n){return e(gn(t.uid,$,n))}}},function(e,t){return Object.assign({},e,t)})(wn),Cn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).onBuy=n.onBuy.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=be(ee,this.props.styleUid,this.props.uid);if(void 0!==e){var t=kn(e.effect);return o.createElement("tr",{key:e.uid,role:"button",onClick:this.onBuy},o.createElement("td",null,e.name),o.createElement("td",null,e.level),o.createElement("td",null,e.description,t.length>0?" "+t:null),o.createElement("td",null,this.renderButton()))}}},{key:"renderButton",value:function(){return this.props.canBuy&&this.props.cost.canPay?o.createElement("button",{color:"success"},o.createElement(jt.Icon,{name:"graduation-cap"})):o.createElement("button",{color:"danger"},o.createElement(jt.Icon,{name:"times"}))}},{key:"onBuy",value:function(){this.props.canBuy&&this.props.cost.canPay&&this.props.onBuy(this.props.cost)}}]),t}(o.PureComponent);var In=Object(r.b)(function(e,t){return{canBuy:Fe(e,ee,t.styleUid,t.uid),cost:Te(e,ee,t.styleUid,t.uid),known:_e(e.kungfu,ee,t.styleUid,t.uid),styleUid:t.styleUid,uid:t.uid}},function(e,t){return{onBuy:function(n){return e(En(t.styleUid,t.uid,ee,n))}}},function(e,t){return Object.assign({},e,t)})(Cn),Bn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).renderTechniques=n.renderTechniques.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=ye(ee,this.props.uid);return o.createElement("div",null,o.createElement("div",{className:"Grid",style:{justifyContent:"space-between"}},o.createElement("h4",null,e.name),o.createElement("span",{style:{justifyContent:"flex-end"}},this.renderButton())),o.createElement("div",null,o.createElement("h5",null,"Description"),o.createElement("p",null,e.description)),o.createElement("div",{className:"Grid"},o.createElement("h5",null,"Element"),o.createElement("p",null,o.createElement("button",{disabled:!0},e.element))),o.createElement("div",null,o.createElement("h5",null,"Techniques")),this.renderTechniques(e))}},{key:"renderTechniques",value:function(e){return o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Name"),o.createElement("th",null,"Level"),o.createElement("th",null,"Effect"),o.createElement("th",null))),o.createElement("tbody",null,e.techniques.sort(function(e,t){return e.level-t.level}).map(function(t){return o.createElement(In,{key:t.uid,styleUid:e.uid,uid:t.uid})})))}},{key:"renderButton",value:function(){var e=this;return this.props.canOpen&&this.props.cost.canPay?o.createElement("button",{color:"success",onClick:function(){return e.props.onOpen(e.props.cost)}},o.createElement(jt.Icon,{name:"graduation-cap"})):this.props.isOpen?o.createElement("button",{color:"primary",disabled:!0},o.createElement(jt.Icon,{name:"leanpub"})):o.createElement("button",{color:"danger"},o.createElement(jt.Icon,{name:"times"}))}}]),t}(o.PureComponent);var Tn=Object(r.b)(function(e,t){var n=Le(e.kungfu,ee,t.uid);return{canOpen:De(e,ee,t.uid),cost:Be(e),isOpen:n,knownTechniques:n?e.kungfu[ee][t.uid]:[],uid:t.uid}},function(e,t){return{onOpen:function(n){return e(gn(t.uid,ee,n))}}},function(e,t){return Object.assign({},e,t)})(Bn),Nn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).renderItem=n.renderItem.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=de.map(function(e){return{disabled:!1,id:e.uid,label:e.name,meta:e.name+",external"}}),t=he.map(function(e){return{disabled:!1,id:e.uid,label:e.name,meta:e.name+",internal"}});return o.createElement(vn,{options:[{disabled:!0,id:"External Styles",label:"External Styles",meta:"external"}].concat(e).concat([{disabled:!0,id:"Internal Styles",label:"Internal Styles",meta:"internal"}]).concat(t),preSelected:[],renderItem:this.renderItem})}},{key:"renderItem",value:function(e){return function(e){var t=de.findIndex(function(t){return t.uid===e});return he.findIndex(function(t){return t.uid===e}),-1!==t?$:ee}(e)===$?o.createElement(Sn,{uid:e}):o.createElement(Tn,{uid:e})}}]),t}(o.PureComponent),Pn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Empty Intro"),o.createElement(Bt,null,o.createElement(Nn,null)))}}]),t}(o.PureComponent);var xn=n(55),Un=n(198),An=n(195),Rn=n(196),Ln=n(197),_n=n(102);n(181);var Hn=function(e){function t(e){var n;Object(mt.a)(this,t);var r={};return 1===(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).props.cost.length&&(r.cost=n.props.cost[0]),n.state=r,n.renderComplexCost=n.renderComplexCost.bind(Object(Ot.a)(n)),n.renderPayload=n.renderPayload.bind(Object(Ot.a)(n)),n.buyButtonClick=n.buyButtonClick.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=this,t=Z(this.props.lsUid,this.props.uid),n=t.payload?this.renderPayload(t.payload):void 0,r=t.perks.map(function(t,n){return e.renderBonusChoices(t,n)}),i="number"===typeof t.cost?void 0:this.renderComplexCost();return o.createElement(Un.a,{isOpen:this.props.isOpen},o.createElement(An.a,{toggle:this.props.toggle},t.type),o.createElement(Rn.a,null,t.description,o.createElement("hr",null),[n,r,i]),o.createElement(Ln.a,null,this.renderBuyButton()))}},{key:"renderBonusChoices",value:function(e,t){if(e.type===g){var n=function(e){console.log(e.target.value)};return o.createElement("div",{key:"bonus_"+t},Object.keys(e.bonuses).map(function(r){return o.createElement("div",{key:r},o.createElement("input",{type:"radio",key:"radio_bonus_"+t,name:"bonus_"+t,onChange:n}),function(e){switch(e.type){case m:return"destiny +"+e.value;case y:return"entanglement +"+e.value;case b:return e.chi+" chi +"+e.value;case v:return e.chi+" chi cultivation +"+e.value;case g:throw new Error("bonus too complicated to render : "+JSON.stringify(e));case E:return"skill "+e.skill+" +5";case k:return"skill "+e.skill+" : free speciality "+e.speciality;default:return"no"}}(e.bonuses[r]))}))}}},{key:"renderPayload",value:function(e){var t=this;return o.createElement(Ht,{key:"payload",header:e,default:this.state.payload,validate:function(e){return e.length>0},onSubmit:function(e){t.setState({cost:t.state.cost,payload:e})}})}},{key:"renderComplexCost",value:function(){var e=this,t={};return this.props.cost.forEach(function(e,n){var r=Object(xn.a)({},n,{label:e.original.toString(),style:{color:e.canPay?"black":"light-grey"}});t=Object(Re.a)({},t,r)}),o.createElement("div",{key:"cost"},o.createElement(_n.a,{min:0,max:this.props.cost.length-1,marks:t,included:!1,onChange:function(t){e.setState({cost:e.props.cost[t],payload:e.state.payload})},step:null}),o.createElement("br",null))}},{key:"renderBuyButton",value:function(){var e=!!!Z(this.props.lsUid,this.props.uid).payload||this.state.payload&&this.state.payload.length>0,t=!!this.state.cost&&this.state.cost.canPay,n=e&&t;return o.createElement(At.a,{disabled:!n,color:"info",onClick:this.buyButtonClick},"Pay")}},{key:"buyButtonClick",value:function(){this.state.cost&&this.state.cost.canPay&&(this.props.onBuy(this.state.cost,this.state.payload),this.props.toggle(),this.setState({}))}}]),t}(o.PureComponent),Dn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).state={isModalOpen:!1},n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n.renderKnown=n.renderKnown.bind(Object(Ot.a)(n)),n.renderNotKnown=n.renderNotKnown.bind(Object(Ot.a)(n)),n.onRowClickBuy=n.onRowClickBuy.bind(Object(Ot.a)(n)),n.toggleModal=n.toggleModal.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=this,t=Z(this.props.lsUid,this.props.uid);if(void 0!==t){var n=this.props.payloads.map(function(t,n){return e.renderKnown(t,n)});return n.length>0&&t.repeatable?n.concat(this.renderNotKnown()):n.length>0?n:this.renderNotKnown()}}},{key:"renderButton",value:function(e){return e?o.createElement("button",{color:"success"},o.createElement(jt.Icon,{name:"graduation-cap"})):o.createElement("button",{color:"danger"},o.createElement(jt.Icon,{name:"times"}))}},{key:"fromCostToString",value:function(e){return"number"===typeof e?e:e.min+"-"+e.max}},{key:"renderKnown",value:function(e,t){var n=Z(this.props.lsUid,this.props.uid);return o.createElement("tr",{key:"known_"+n.uid+"_"+t},o.createElement("td",null,n.type),o.createElement("td",null,this.fromCostToString(n.cost)),o.createElement("td",null,n.description),o.createElement("td",null))}},{key:"renderNotKnown",value:function(){var e=Z(this.props.lsUid,this.props.uid),t=this.props.canBuy&&this.props.cost.map(function(e){return e.canPay}).reduce(function(e,t){return e||t},!1);return o.createElement("tr",{key:"unknown_"+e.uid,role:"button",onClick:this.onRowClickBuy},o.createElement(Hn,{lsUid:this.props.lsUid,uid:this.props.uid,cost:this.props.cost,onBuy:this.props.onBuy,isOpen:this.state.isModalOpen,toggle:this.toggleModal}),o.createElement("td",null,e.type),o.createElement("td",null,this.fromCostToString(e.cost)),o.createElement("td",null,e.description),o.createElement("td",null,this.renderButton(t)))}},{key:"onRowClickBuy",value:function(){this.props.canBuy&&this.props.cost.map(function(e){return e.canPay}).reduce(function(e,t){return e||t},!1)&&!this.state.isModalOpen&&this.toggleModal()}},{key:"toggleModal",value:function(){this.setState({isModalOpen:!this.state.isModalOpen})}}]),t}(o.PureComponent);var Fn=Object(r.b)(function(e,t){var n=e.loresheets[t.lsUid],r=void 0===n?[]:n.filter(function(e){return e.uid===t.uid}).map(function(e){return e.payload});return{canBuy:Ze(e.loresheets,t.lsUid,t.uid),cost:Ce(e,t.lsUid,t.uid),known:ze(e.loresheets,t.lsUid,t.uid),lsUid:t.lsUid,payloads:r,uid:t.uid}},function(e,t){return{onBuy:function(n,r){return e(function(e,t,n,r){return Q(e,t),{cost:n,lsUid:e,type:Ve,uid:t,payload:r}}(t.lsUid,t.uid,n,r))}}},function(e,t){return Object.assign({},e,t)})(Dn),Wn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).renderOptions=n.renderOptions.bind(Object(Ot.a)(n)),n.renderButton=n.renderButton.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=X(this.props.uid);return o.createElement("div",null,o.createElement("div",{className:"Grid",style:{justifyContent:"space-between"}},o.createElement("h4",null,e.name),o.createElement("span",{style:{justifyContent:"flex-end"}},this.renderButton())),o.createElement("div",null,o.createElement("p",null,e.description)),o.createElement("div",null,this.renderOptions(e)))}},{key:"renderOptions",value:function(e){return o.createElement("table",null,o.createElement("thead",null,o.createElement("tr",null,o.createElement("th",null,"Type"),o.createElement("th",null,"Cost"),o.createElement("th",null,"Effect"),o.createElement("th",null))),o.createElement("tbody",null,e.options.map(function(t){return o.createElement(Fn,{key:t.uid,lsUid:e.uid,uid:t.uid})})))}},{key:"renderButton",value:function(){var e=this;return this.props.canOpen&&this.props.cost.canPay?o.createElement("button",{color:"success",onClick:function(){return e.props.onOpen(e.props.cost)}},o.createElement(wt.a,{name:"graduation-cap"})):this.props.known?o.createElement("button",{color:"primary",disabled:!0},o.createElement(wt.a,{name:"leanpub"})):o.createElement("button",{color:"danger"},o.createElement(wt.a,{name:"times"}))}}]),t}(o.PureComponent);var Mn=Object(r.b)(function(e,t){return{canOpen:Je(e,t.uid),cost:we(e,t.uid),known:Ge(e.loresheets,t.uid),uid:t.uid}},function(e,t){return{onOpen:function(n){return e(function(e,t){return J(e),{cost:t,type:Ye,uid:e}}(t.uid,n))}}},function(e,t){return Object.assign({},e,t)})(Wn),qn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).renderItem=n.renderItem.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e,t=z.map(function(e){var t=[{id:e,label:e,disabled:!0}],n=G.filter(function(t){return t.category===e}).map(function(t){return{disabled:!1,id:t.uid,label:t.name,meta:t.name+","+e}});return t.concat(n)}),n=(e=[]).concat.apply(e,Object(Ae.a)(t));return o.createElement(vn,{options:n,preSelected:[],renderItem:this.renderItem})}},{key:"renderItem",value:function(e){return o.createElement(Mn,{uid:e})}}]),t}(o.PureComponent),Kn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Empty Intro"),o.createElement(Bt,null,o.createElement(qn,null)))}}]),t}(o.PureComponent),Yn=function(e){function t(e){var n;return Object(mt.a)(this,t),(n=Object(bt.a)(this,Object(vt.a)(t).call(this,e))).state={hoverIndex:n.props.history.length},n.renderHistoryAction.bind(Object(Ot.a)(n)),n.rollbackHistory.bind(Object(Ot.a)(n)),n}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){var e=this;return o.createElement("div",{className:"History"},o.createElement("div",null,this.props.history.map(function(t,n){return e.renderHistoryAction(t,n)})))}},{key:"renderHistoryAction",value:function(e,t){var n=this;return o.createElement("div",{key:"rowHistory_"+t,onClick:function(){return n.rollbackHistory(t)}},o.createElement("div",null,t+1+" "+e.type),o.createElement("div",null,JSON.stringify(e)))}},{key:"rollbackHistory",value:function(e){this.props.onDelete(e)}}]),t}(o.PureComponent);var Vn=Object(r.b)(function(e){return{history:e.history}},function(e){return{onDelete:function(t){e(function(e){return{type:Me,id:e}}(t))}}},function(e,t){return Object.assign({},e,t)})(Yn),Gn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement("div",null,o.createElement(It,null,"Empty Intro"),o.createElement(Bt,null,o.createElement(Vn,null)))}}]),t}(o.PureComponent),zn=function(e){function t(){return Object(mt.a)(this,t),Object(bt.a)(this,Object(vt.a)(t).apply(this,arguments))}return Object(gt.a)(t,e),Object(yt.a)(t,[{key:"render",value:function(){return o.createElement(Et.a,null,o.createElement("div",{className:"lotwcs"},o.createElement(Ct,null),o.createElement(kt.a,{exact:!0,path:"/",component:Qt}),o.createElement(kt.a,{exact:!0,path:"/skills",component:sn}),o.createElement(kt.a,{exact:!0,path:"/chi",component:fn}),o.createElement(kt.a,{exact:!0,path:"/virtues",component:ln}),o.createElement(kt.a,{exact:!0,path:"/equipment",component:yn}),o.createElement(kt.a,{exact:!0,path:"/conditions",component:bn}),o.createElement(kt.a,{exact:!0,path:"/kungfu",component:Pn}),o.createElement(kt.a,{exact:!0,path:"/loresheets",component:Kn}),o.createElement(kt.a,{exact:!0,path:"/history",component:Gn})))}}]),t}(o.PureComponent),Jn=Object(i.createStore)(at,function(){var e=dt(),t=[ct("4th_rank"),ut("warrior"),lt("Awareness","Hear",ve),lt("Awareness","Sight",ve)];return e.destiny+=25,ot(e,t)}(),Object(a.devToolsEnhancer)({}));s.render(o.createElement("div",null,o.createElement(r.a,{store:Jn},o.createElement(zn,null))),document.getElementById("root")),function(e){if("serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",function(){var t="".concat("","/service-worker.js");pt?(function(e,t){fetch(e).then(function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ft(e,t)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(t,e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit http://bit.ly/CRA-PWA")})):ft(t,e)})}}()}},[[104,1,2]]]);
//# sourceMappingURL=main.2326b995.chunk.js.map